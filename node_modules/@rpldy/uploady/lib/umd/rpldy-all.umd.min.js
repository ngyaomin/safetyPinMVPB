/*!
 * MIT License
 * 
 * Copyright (c) 2020 Yoav Niran
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.rpldy=t(require("react"),require("react-dom")):e.rpldy=t(e.react,e["react-dom"])}(window,(function(e,t){return function(e){function t(t){for(var r,a,i=t[0],c=t[1],l=t[2],s=0,f=[];s<i.length;s++)a=i[s],Object.prototype.hasOwnProperty.call(u,a)&&u[a]&&f.push(u[a][0]),u[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==u[c]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},u={main:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window.webpackJsonprpldy=window.webpackJsonprpldy||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;return o.push(["MIuT","polyfills"]),n()}({"10TY":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return o}));var r="__rupy-logger-debug__",u={ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted"},o={ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"}},MIuT:function(e,t,n){"use strict";n.r(t),n.d(t,"chunkedSender",(function(){return a})),n.d(t,"lifeEvents",(function(){return i})),n.d(t,"mockSender",(function(){return c})),n.d(t,"retry",(function(){return d})),n.d(t,"safeStorage",(function(){return s})),n.d(t,"sender",(function(){return u})),n.d(t,"shared",(function(){return r})),n.d(t,"simpleState",(function(){return o})),n.d(t,"tusSender",(function(){return f})),n.d(t,"uploader",(function(){return l})),n.d(t,"chunkedUploady",(function(){return g})),n.d(t,"retryHooks",(function(){return h})),n.d(t,"sharedUi",(function(){return p})),n.d(t,"tusUploady",(function(){return b})),n.d(t,"uploadButton",(function(){return m})),n.d(t,"uploadDropZone",(function(){return S})),n.d(t,"uploadPreview",(function(){return E})),n.d(t,"uploadUrlInput",(function(){return y})),n.d(t,"uploady",(function(){return v}));var r={};n.r(r),n.d(r,"BATCH_STATES",(function(){return C.a})),n.d(r,"FILE_STATES",(function(){return C.c})),n.d(r,"invariant",(function(){return R.a})),n.d(r,"throttle",(function(){return L.a})),n.d(r,"logger",(function(){return T})),n.d(r,"triggerCancellable",(function(){return P})),n.d(r,"triggerUpdater",(function(){return j})),n.d(r,"createBatchItem",(function(){return K})),n.d(r,"request",(function(){return oe})),n.d(r,"parseResponseHeaders",(function(){return ue})),n.d(r,"isFunction",(function(){return ae.e})),n.d(r,"isPlainObject",(function(){return ae.f})),n.d(r,"isSamePropInArrays",(function(){return ae.h})),n.d(r,"devFreeze",(function(){return ae.b})),n.d(r,"merge",(function(){return ae.i})),n.d(r,"getMerge",(function(){return ae.c})),n.d(r,"clone",(function(){return ae.a})),n.d(r,"pick",(function(){return ae.j})),n.d(r,"hasWindow",(function(){return ae.d})),n.d(r,"isProduction",(function(){return ae.g}));var u={};n.r(u),n.d(u,"default",(function(){return ke})),n.d(u,"send",(function(){return Ue})),n.d(u,"getXhrSend",(function(){return _e})),n.d(u,"XHR_SENDER_TYPE",(function(){return pe})),n.d(u,"MissingUrlError",(function(){return Oe}));var o={};n.r(o),n.d(o,"default",(function(){return ut})),n.d(o,"createState",(function(){return ut})),n.d(o,"unwrap",(function(){return rt})),n.d(o,"isProxy",(function(){return Ze})),n.d(o,"isProxiable",(function(){return Je}));var a={};n.r(a),n.d(a,"default",(function(){return yt})),n.d(a,"CHUNK_EVENTS",(function(){return ot})),n.d(a,"CHUNKING_SUPPORT",(function(){return je})),n.d(a,"CHUNKED_SENDER_TYPE",(function(){return at})),n.d(a,"CHUNKED_DEFAULT_OPTIONS",(function(){return Pe})),n.d(a,"getChunkedEnhancer",(function(){return Et})),n.d(a,"createChunkedSender",(function(){return St})),n.d(a,"getChunkDataFromFile",(function(){return Be}));var i={};n.r(i),n.d(i,"default",(function(){return ln})),n.d(i,"addLife",(function(){return ln})),n.d(i,"isLE",(function(){return Vt})),n.d(i,"createLifePack",(function(){return dn}));var c={};n.r(c),n.d(c,"default",(function(){return mn})),n.d(c,"MOCK_SENDER_TYPE",(function(){return sn})),n.d(c,"createMockSender",(function(){return hn})),n.d(c,"getMockSenderEnhancer",(function(){return bn}));var l={};n.r(l),n.d(l,"default",(function(){return or})),n.d(l,"UPLOADER_EVENTS",(function(){return Sn})),n.d(l,"DEFAULT_OPTIONS",(function(){return Wn})),n.d(l,"composeEnhancers",(function(){return ur})),n.d(l,"createUploader",(function(){return rr})),n.d(l,"send",(function(){return Ue})),n.d(l,"getXhrSend",(function(){return _e})),n.d(l,"XHR_SENDER_TYPE",(function(){return pe})),n.d(l,"MissingUrlError",(function(){return Oe}));var d={};n.r(d),n.d(d,"default",(function(){return dr})),n.d(d,"retryEnhancer",(function(){return dr})),n.d(d,"RETRY_EVENT",(function(){return ir})),n.d(d,"RETRY_EXT",(function(){return ar}));var s={};n.r(s),n.d(s,"safeLocalStorage",(function(){return vr})),n.d(s,"safeSessionStorage",(function(){return gr}));var f={};n.r(f),n.d(f,"CHUNKING_SUPPORT",(function(){return je})),n.d(f,"TUS_SENDER_TYPE",(function(){return Tr})),n.d(f,"getTusEnhancer",(function(){return eu})),n.d(f,"clearResumables",(function(){return Rr})),n.d(f,"TUS_EXT",(function(){return Cr})),n.d(f,"default",(function(){return tu}));var p={};n.r(p),n.d(p,"useBatchAddListener",(function(){return hu})),n.d(p,"useBatchStartListener",(function(){return bu})),n.d(p,"useBatchProgressListener",(function(){return yu})),n.d(p,"useBatchFinishListener",(function(){return mu})),n.d(p,"useBatchCancelledListener",(function(){return Su})),n.d(p,"useBatchAbortListener",(function(){return Eu})),n.d(p,"useItemStartListener",(function(){return Ou})),n.d(p,"useItemFinishListener",(function(){return Ru})),n.d(p,"useItemProgressListener",(function(){return Au})),n.d(p,"useItemCancelListener",(function(){return Iu})),n.d(p,"useItemErrorListener",(function(){return Lu})),n.d(p,"useItemAbortListener",(function(){return Cu})),n.d(p,"useItemFinalizeListener",(function(){return Tu})),n.d(p,"useRequestPreSend",(function(){return Du})),n.d(p,"useAllAbortListener",(function(){return wu})),n.d(p,"generateUploaderEventHook",(function(){return vu})),n.d(p,"generateUploaderEventHookWithState",(function(){return pu})),n.d(p,"logWarning",(function(){return gu})),n.d(p,"assertContext",(function(){return du})),n.d(p,"useUploadOptions",(function(){return _u})),n.d(p,"useAbortItem",(function(){return Uu})),n.d(p,"useAbortBatch",(function(){return ku})),n.d(p,"useAbortAll",(function(){return Pu})),n.d(p,"NoDomUploady",(function(){return Nu})),n.d(p,"UploadyContext",(function(){return lu})),n.d(p,"createContextApi",(function(){return cu})),n.d(p,"withRequestPreSendUpdate",(function(){return ju})),n.d(p,"useUploadyContext",(function(){return su})),n.d(p,"useUploady",(function(){return su}));var v={};n.r(v),n.d(v,"default",(function(){return Xu})),n.d(v,"useFileInput",(function(){return Ku})),n.d(v,"Uploady",(function(){return Mu})),n.d(v,"UPLOADER_EVENTS",(function(){return Sn})),n.d(v,"DEFAULT_OPTIONS",(function(){return Wn})),n.d(v,"composeEnhancers",(function(){return ur})),n.d(v,"createUploader",(function(){return rr})),n.d(v,"send",(function(){return Ue})),n.d(v,"getXhrSend",(function(){return _e})),n.d(v,"XHR_SENDER_TYPE",(function(){return pe})),n.d(v,"MissingUrlError",(function(){return Oe})),n.d(v,"useBatchAddListener",(function(){return hu})),n.d(v,"useBatchStartListener",(function(){return bu})),n.d(v,"useBatchProgressListener",(function(){return yu})),n.d(v,"useBatchFinishListener",(function(){return mu})),n.d(v,"useBatchCancelledListener",(function(){return Su})),n.d(v,"useBatchAbortListener",(function(){return Eu})),n.d(v,"useItemStartListener",(function(){return Ou})),n.d(v,"useItemFinishListener",(function(){return Ru})),n.d(v,"useItemProgressListener",(function(){return Au})),n.d(v,"useItemCancelListener",(function(){return Iu})),n.d(v,"useItemErrorListener",(function(){return Lu})),n.d(v,"useItemAbortListener",(function(){return Cu})),n.d(v,"useItemFinalizeListener",(function(){return Tu})),n.d(v,"useRequestPreSend",(function(){return Du})),n.d(v,"useAllAbortListener",(function(){return wu})),n.d(v,"generateUploaderEventHook",(function(){return vu})),n.d(v,"generateUploaderEventHookWithState",(function(){return pu})),n.d(v,"logWarning",(function(){return gu})),n.d(v,"assertContext",(function(){return du})),n.d(v,"useUploadOptions",(function(){return _u})),n.d(v,"useAbortItem",(function(){return Uu})),n.d(v,"useAbortBatch",(function(){return ku})),n.d(v,"useAbortAll",(function(){return Pu})),n.d(v,"NoDomUploady",(function(){return Nu})),n.d(v,"UploadyContext",(function(){return lu})),n.d(v,"createContextApi",(function(){return cu})),n.d(v,"withRequestPreSendUpdate",(function(){return ju})),n.d(v,"useUploadyContext",(function(){return su})),n.d(v,"useUploady",(function(){return su}));var g={};n.r(g),n.d(g,"default",(function(){return Yu})),n.d(g,"ChunkedUploady",(function(){return Wu})),n.d(g,"CHUNK_EVENTS",(function(){return ot})),n.d(g,"useFileInput",(function(){return Ku})),n.d(g,"Uploady",(function(){return Mu})),n.d(g,"UPLOADER_EVENTS",(function(){return Sn})),n.d(g,"DEFAULT_OPTIONS",(function(){return Wn})),n.d(g,"composeEnhancers",(function(){return ur})),n.d(g,"createUploader",(function(){return rr})),n.d(g,"send",(function(){return Ue})),n.d(g,"getXhrSend",(function(){return _e})),n.d(g,"XHR_SENDER_TYPE",(function(){return pe})),n.d(g,"MissingUrlError",(function(){return Oe})),n.d(g,"useBatchAddListener",(function(){return hu})),n.d(g,"useBatchStartListener",(function(){return bu})),n.d(g,"useBatchProgressListener",(function(){return yu})),n.d(g,"useBatchFinishListener",(function(){return mu})),n.d(g,"useBatchCancelledListener",(function(){return Su})),n.d(g,"useBatchAbortListener",(function(){return Eu})),n.d(g,"useItemStartListener",(function(){return Ou})),n.d(g,"useItemFinishListener",(function(){return Ru})),n.d(g,"useItemProgressListener",(function(){return Au})),n.d(g,"useItemCancelListener",(function(){return Iu})),n.d(g,"useItemErrorListener",(function(){return Lu})),n.d(g,"useItemAbortListener",(function(){return Cu})),n.d(g,"useItemFinalizeListener",(function(){return Tu})),n.d(g,"useRequestPreSend",(function(){return Du})),n.d(g,"useAllAbortListener",(function(){return wu})),n.d(g,"generateUploaderEventHook",(function(){return vu})),n.d(g,"generateUploaderEventHookWithState",(function(){return pu})),n.d(g,"logWarning",(function(){return gu})),n.d(g,"assertContext",(function(){return du})),n.d(g,"useUploadOptions",(function(){return _u})),n.d(g,"useAbortItem",(function(){return Uu})),n.d(g,"useAbortBatch",(function(){return ku})),n.d(g,"useAbortAll",(function(){return Pu})),n.d(g,"NoDomUploady",(function(){return Nu})),n.d(g,"UploadyContext",(function(){return lu})),n.d(g,"createContextApi",(function(){return cu})),n.d(g,"withRequestPreSendUpdate",(function(){return ju})),n.d(g,"useUploadyContext",(function(){return su})),n.d(g,"useUploady",(function(){return su})),n.d(g,"useChunkStartListener",(function(){return Qu})),n.d(g,"useChunkFinishListener",(function(){return Vu}));var h={};n.r(h),n.d(h,"default",(function(){return to})),n.d(h,"RETRY_EVENT",(function(){return ir})),n.d(h,"retryEnhancer",(function(){return dr})),n.d(h,"useRetry",(function(){return Ju})),n.d(h,"useBatchRetry",(function(){return $u})),n.d(h,"useRetryListener",(function(){return eo}));var b={};n.r(b),n.d(b,"default",(function(){return uo})),n.d(b,"TusUploady",(function(){return no})),n.d(b,"useClearResumableStore",(function(){return ro})),n.d(b,"useFileInput",(function(){return Ku})),n.d(b,"Uploady",(function(){return Mu})),n.d(b,"UPLOADER_EVENTS",(function(){return Sn})),n.d(b,"DEFAULT_OPTIONS",(function(){return Wn})),n.d(b,"composeEnhancers",(function(){return ur})),n.d(b,"createUploader",(function(){return rr})),n.d(b,"send",(function(){return Ue})),n.d(b,"getXhrSend",(function(){return _e})),n.d(b,"XHR_SENDER_TYPE",(function(){return pe})),n.d(b,"MissingUrlError",(function(){return Oe})),n.d(b,"useBatchAddListener",(function(){return hu})),n.d(b,"useBatchStartListener",(function(){return bu})),n.d(b,"useBatchProgressListener",(function(){return yu})),n.d(b,"useBatchFinishListener",(function(){return mu})),n.d(b,"useBatchCancelledListener",(function(){return Su})),n.d(b,"useBatchAbortListener",(function(){return Eu})),n.d(b,"useItemStartListener",(function(){return Ou})),n.d(b,"useItemFinishListener",(function(){return Ru})),n.d(b,"useItemProgressListener",(function(){return Au})),n.d(b,"useItemCancelListener",(function(){return Iu})),n.d(b,"useItemErrorListener",(function(){return Lu})),n.d(b,"useItemAbortListener",(function(){return Cu})),n.d(b,"useItemFinalizeListener",(function(){return Tu})),n.d(b,"useRequestPreSend",(function(){return Du})),n.d(b,"useAllAbortListener",(function(){return wu})),n.d(b,"generateUploaderEventHook",(function(){return vu})),n.d(b,"generateUploaderEventHookWithState",(function(){return pu})),n.d(b,"logWarning",(function(){return gu})),n.d(b,"assertContext",(function(){return du})),n.d(b,"useUploadOptions",(function(){return _u})),n.d(b,"useAbortItem",(function(){return Uu})),n.d(b,"useAbortBatch",(function(){return ku})),n.d(b,"useAbortAll",(function(){return Pu})),n.d(b,"NoDomUploady",(function(){return Nu})),n.d(b,"UploadyContext",(function(){return lu})),n.d(b,"createContextApi",(function(){return cu})),n.d(b,"withRequestPreSendUpdate",(function(){return ju})),n.d(b,"useUploadyContext",(function(){return su})),n.d(b,"useUploady",(function(){return su}));var m={};n.r(m),n.d(m,"default",(function(){return io})),n.d(m,"UploadButton",(function(){return ao})),n.d(m,"asUploadButton",(function(){return oo}));var S={};n.r(S),n.d(S,"default",(function(){return so})),n.d(S,"UploadDropZone",(function(){return lo}));var E={};n.r(E),n.d(E,"PREVIEW_TYPES",(function(){return fo})),n.d(E,"default",(function(){return yo})),n.d(E,"UploadPreview",(function(){return Eo}));var y={};n.r(y),n.d(y,"default",(function(){return Io})),n.d(y,"UploadUrlInput",(function(){return Ro}));var O=n("kvau"),R=n.n(O),I=n("uDTZ"),L=n.n(I),C=n("10TY"),T=n("ytft"),A=n("TEMH"),D=n.n(A),w=n("o+MX"),_=n.n(w),U=n("OBge"),k=n.n(U),P=function(e,t){for(var n,r=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];return new k.a((function(n,u){var o,a=e.apply(void 0,_()(o=[t]).call(o,r));a&&a.length?k.a.all(a).catch(u).then((function(e){return e&&n(!!~D()(e).call(e,(function(e){return!1===e})))})):n(!1)}))},u=arguments.length,o=new Array(u>2?u-2:0),a=2;a<u;a++)o[a-2]=arguments[a];return t?r.apply(void 0,_()(n=[t]).call(n,o)):r},N=function(e){return null==e},j=function(e,t){for(var n,r=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];return new k.a((function(n,u){var o,a=e.apply(void 0,_()(o=[t]).call(o,r));a&&a.length?k.a.all(a).catch(u).then((function(e){var t;if(e)for(;N(t)&&e.length;)t=e.pop();n(N(t)?void 0:t)})):n()}))},u=arguments.length,o=new Array(u>2?u-2:0),a=2;a<u;a++)o[a-2]=arguments[a];return t?r.apply(void 0,_()(n=[t]).call(n,o)):r},B=n("LYCE"),H=n.n(B),x=n("nhkr"),F=n.n(x),M=n("CtDf"),q=n.n(M),z=q()("__rpldy-bi__"),G=0,K=function(e,t){var n;G+=1;var r={id:e.id&&e.batchId?e.id:_()(n="".concat(t,".item-")).call(n,G),batchId:t,state:C.c.ADDED,completed:0,loaded:0,aborted:!1,recycled:!1,previousBatch:null};if(H()(r,z,{value:!0,writable:!0}),"object"===F()(e)&&!0===e[z]&&(r.recycled=!0,r.previousBatch=e.batchId,e=e.file||e.url),"string"==typeof e)r=function(e,t){return e.url=t,e}(r,e);else{if(!function(e){return e&&(e instanceof Blob||e instanceof File||"object"===F()(e)&&e.name&&e.type)}(e))throw new Error("Unknown type of file added: ".concat(F()(e)));r=function(e,t){return e.file=t,e}(r,e)}return r},X=n("+oHS"),W=n.n(X),Q=n("RXMP"),V=n.n(Q),Y=function(e,t){var n;t&&V()(n=W()(t)).call(n,(function(n){void 0!==t[n]&&e.setRequestHeader(n,t[n])}))},Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest,u=new k.a((function(u,o){r.onerror=function(){return o(r)},r.ontimeout=function(){return o(r)},r.onabort=function(){return o(r)},r.onload=function(){return u(r)},r.open(n.method||"GET",e),Y(r,n.headers),r.withCredentials=!!n.withCredentials,n.preSend&&n.preSend(r),r.send(t)}));return u.xhr=r,u},J=n("zLi2"),$=n.n(J),ee=n("RKTd"),te=n.n(ee),ne=n("KYsz"),re=n.n(ne),ue=function(e){var t;try{var n,r;t=re()(n=te()(r=e.getAllResponseHeaders()).call(r).split(/[\r\n]+/)).call(n,(function(e,t){var n=t.split(": "),r=$()(n,2),u=r[0],o=r[1];return e[u]=o,e}),{})}catch(t){Object(T.debugLog)("uploady.request: failed to read response headers",e)}return t},oe=Z,ae=n("VPmE"),ie=n("ZbhI"),ce=n.n(ie),le=n("UtpJ"),de=n.n(le),se=n("kT1S"),fe=n.n(se),pe="rpldy-sender",ve=n("06Pm"),ge=n.n(ve),he=n("X5/F"),be=n.n(he),me=n("K82H"),Se=n.n(me),Ee=n("P0a4"),ye=n.n(Ee),Oe=function(e){be()(n,e);var t=Se()(n);function n(e){var r;return ge()(this,n),(r=t.call(this,"".concat(e," didn't receive upload URL"))).name="MissingUrlError",r}return n}(ye()(Error)),Re=n("i5y0"),Ie=n.n(Re),Le=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),u=2;u<n;u++)r[u-2]=arguments[u];var o,a;e.set?e.set.apply(e,_()(o=[t]).call(o,r)):(e.delete&&e.delete(t),e.append.apply(e,_()(a=[t]).call(a,r)))},Ce=function(e,t){var n,r=new FormData;t.params&&V()(n=Ie()(t.params)).call(n,(function(e){var t=$()(e,2),n=t[0],u=t[1];return Le(r,n,u)}));return function(e,t,n){var r=1===t.length;V()(t).call(t,(function(t,u){var o,a=r?n.paramName:Object(ae.e)(n.formatGroupParamName)?n.formatGroupParamName(u,n.paramName):_()(o="".concat(n.paramName,"[")).call(o,u,"]");t.file?Le(e,a,t.file,t.file.name):t.url&&Le(e,a,t.url)}))}(r,e,t),r},Te=[200,201,202,203,204],Ae=function(e,t,n,r,u){var o,a=(null==u?void 0:u.getRequestData)?u.getRequestData(e,n):function(e,t){var n;if(t.sendWithFormData)T.debugLog("uploady.sender: sending ".concat(e.length," item(s) as form data")),n=Ce(e,t);else{if(e.length>1)throw new Error("XHR Sender - Request without form data can only contain 1 item. received ".concat(e.length));var r=e[0];T.debugLog("uploady.sender: sending item ".concat(r.id," as request body")),n=r.file||r.url}return n}(e,n),i=function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,c=arguments.length>2?arguments[2]:void 0;c=Object(ae.i)(fe()(fe()({},Object(ae.j)(n,["method","headers","withCredentials"])),{},{preSend:function(t){t.upload.onprogress=function(t){t.lengthComputable&&r&&r(t,de()(e).call(e))}}}),c);var l=oe(u,i,c);return o=l.xhr,l},c=(null==u?void 0:u.preRequestHandler)?u.preRequestHandler(i,e,t,n,r,u):i();return{url:t,count:e.length,pXhr:c,getXhr:function(){return o},aborted:!1}},De=function(e,t,n){var r=e,u=t&&t["content-type"];if(n.forceJsonResponse||u&&~ce()(u).call(u,"json"))try{r=JSON.parse(e)}catch(e){}return r},we=function(e,t){return e.pXhr.then((function(e){var n,r;T.debugLog("uploady.sender: received upload response ",e),n=~ce()(Te).call(Te,e.status)?C.c.FINISHED:C.c.ERROR,r=e.status;var u=ue(e);return{status:r,state:n,response:{data:De(e.response,u,t),headers:u}}})).catch((function(t){var n,r;return e.aborted?(n=C.c.ABORTED,r="aborted"):(T.debugLog("uploady.sender: upload failed: ",t),n=C.c.ERROR,r=t),{error:!0,state:n,response:r,status:0}}))},_e=function(e){return function(t,n,r,u){if(!n)throw new Oe(pe);T.debugLog("uploady.sender: sending file: ",{items:t,url:n,options:r});var o=Ae(t,n,r,u,e);return{request:we(o,r),abort:function(){return function(e){var t,n=!1,r=e.aborted,u=(0,e.getXhr)();!r&&u&&u.readyState&&4!==u.readyState&&(T.debugLog(_()(t="uploady.sender: cancelling request with ".concat(e.count," items to: ")).call(t,e.url)),u.abort(),e.aborted=!0,n=!0);return n}(o)},senderType:pe}}},Ue=_e(),ke=Ue,Pe=Object(ae.b)({chunked:!0,chunkSize:5242880,retries:0,parallel:1}),Ne=null,je=(Ne=null,Object(ae.d)()&&"Blob"in window&&(Ne=de()(Blob.prototype)||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),!!Ne),Be=function(e,t,n){var r,u=null===(r=Ne)||void 0===r?void 0:r.call(e,t,n,e.type);return u&&(u.name=e.name,u.lastModified=e.lastModified),u},He=n("sLxP"),xe=n.n(He),Fe=n("FLGM"),Me=n.n(Fe),qe=function(e){be()(n,e);var t=Se()(n);function n(e){var r;return ge()(this,n),(r=t.call(this,e)).name="ChunkedSendError",r}return n}(ye()(Error)),ze=n("M5Mt"),Ge=n.n(ze),Ke=q()("__rpldy-sstt-proxy__"),Xe=q()("__rpldy-sstt-state__"),We=n("6UaR"),Qe=n.n(We),Ve=n("OWCx"),Ye=n.n(Ve),Ze=function(e){var t;return!Object(ae.g)()&&!!e&&!!~ce()(t=Ye()(e)).call(t,Ke)},Je=function(e){return Qe()(e)||Object(ae.f)(e)&&!function(e){return Object(ae.d)()&&e instanceof File||e.name&&e.size&&e.uri}(e)},$e=Object(ae.c)({withSymbols:!0,predicate:function(e){return e!==Ke&&e!==Xe}}),et=function(e){return!!Object(ae.g)()||e[Xe].isUpdateable},tt=function(e,t){Object(ae.g)()||(e[Xe].isUpdateable=t)},nt=function(e,t){var n,r;Je(e)&&(Ze(e)||(e[Ke]=!0,n=new Proxy(e,t)),V()(r=W()(e)).call(r,(function(n){e[n]=nt(e[n],t)})));return n||e},rt=function(e){return Ze(e)?Object(ae.a)(e,$e):e},ut=function(e){var t={set:function(e,r,u){return et(n)&&(e[r]=nt(u,t)),!0},get:function(e,t){return t===Ke?rt(e):e[t]},defineProperty:function(){throw new Error("Simple State doesnt support defining property")},setPrototypeOf:function(){throw new Error("Simple State doesnt support setting prototype")},deleteProperty:function(e,t){return et(n)&&delete e[t],!0}};Object(ae.g)()||Ze(e)||H()(e,Xe,{value:{isUpdateable:!1},configurable:!0});var n=Object(ae.g)()?e:nt(e,t);return{state:n,update:function(e){if(!Object(ae.g)()&&et(n))throw new Error("Can't call update on State already being updated!");try{tt(n,!0),e(n)}finally{tt(n,!1)}return n},unwrap:function(e){return e?rt(e):Ze(n)?rt(n):n}}},ot=Object(ae.b)({CHUNK_START:"CHUNK_START",CHUNK_FINISH:"CHUNK_FINISH"}),at="rpldy-chunked-sender",it=n("mnMc"),ct=n.n(it),lt=function(e,t,n){var r,u;return t&&_()(r=_()(u="bytes ".concat(e.start,"-")).call(u,e.start+t.size-1,"/")).call(r,n.file.size)},dt=Object(ae.c)({undefinedOverwrites:!0}),st=function(e,t,n,r,u){var o,a=fe()(fe()({},rt(t.sendOptions)),{},{headers:fe()(fe()({},t.sendOptions.headers),{},{"Content-Range":lt(e,e.data,n)})}),i=K(e.data,e.id),c=function(t){r(t,[e])},l=ce()(o=t.chunks).call(o,e);return j(u,ot.CHUNK_START,{item:rt(n),chunk:Object(ae.j)(e,["id","start","end","index","attempt"]),chunkItem:i,sendOptions:a,url:t.url,chunkIndex:l,chunkCount:t.chunks.length,onProgress:r}).then((function(e){var r,u=!1===e;u&&T.debugLog(_()(r="chunkedSender.sendChunk: received false from CHUNK_START handler - skipping chunk ".concat(l,", item ")).call(r,n.id));return u?{request:k.a.resolve({state:C.c.FINISHED,response:"skipping chunk as instructed by CHUNK_START handler",status:200}),abort:function(){return!0},senderType:"chunk-skipped-sender"}:ke([i],(null==e?void 0:e.url)||t.url,dt({},a,e&&e.sendOptions),c)}))},ft=function(e,t){e(t instanceof qe?{state:C.c.ERROR,response:"At least one chunk failed"}:{state:C.c.ERROR,response:t.message})},pt=function(e,t,n,r){e.finished=!0,n({state:r,response:{results:e.responses}})},vt=function(e,t,n,r,u,o){return new k.a((function(a,i){try{var c=function(e,t,n,r,u){var o,a,i;if(e.data||(e.data=Be(n.file,e.start,e.end)),!e.data)throw new qe("chunk failure - failed to slice");T.debugLog(_()(o=_()(a=_()(i="chunkedSender.sendChunk: about to send chunk ".concat(e.id," [")).call(i,e.start,"-")).call(a,e.end,"] to: ")).call(o,t.url||""));var c=st(e,t,n,r,u);return{request:c.then((function(e){return e.request})),abort:function(){return c.then((function(e){return(0,e.abort)()})),!0},senderType:"chunk-passthrough-sender"}}(u,e,t,n,o);(function(e,t,n,r,u){return e.requests[n]={id:n,abort:r.abort},r.request.then((function(r){var o;T.debugLog("chunkedSender: request finished for chunk: ".concat(n," - "),r),delete e.requests[n];var a=D()(o=e.chunks).call(o,(function(e){return e.id===n}));if(~a){if(r.state===C.c.FINISHED){var i,c=Ge()(i=e.chunks).call(i,a,1);u(ot.CHUNK_FINISH,{chunk:Object(ae.j)(c[0],["id","start","end","index","attempt"]),item:rt(t),uploadData:r})}else r.state!==C.c.ABORTED&&(e.chunks[a].attempt+=1);e.responses.push(r.response)}}))})(e,t,u.id,c,o).then((function(){a(),function(e,t,n){var r=!e.chunks.length;return e.aborted?(T.debugLog("chunkedSender: chunked upload aborted for item: ".concat(t.id)),pt(e,0,n,C.c.ABORTED)):r&&!e.error&&(T.debugLog("chunkedSender: chunked upload finished for item: ".concat(t.id),e.responses),pt(e,0,n,C.c.FINISHED)),r||e.error}(e,t,r)||gt(e,t,n,r,o)}))}catch(e){i(e)}}))},gt=function(e,t,n,r,u){if(!e.finished&&!e.aborted){var o=W()(e.requests).length;if(!o||e.parallel&&e.parallel>o){var a;try{a=function(e){for(var t=[],n=W()(e.requests),r=e.parallel||1,u=0;u<e.chunks.length&&n.length<r&&t.length<r;u++){var o=e.chunks[u];if(!ct()(n).call(n,o.id)){if(o.attempt&&!(o.attempt<e.retries))throw new qe("chunk failure");t.push(o)}}return t}(e)}catch(e){ft(r,e)}a&&V()(a).call(a,(function(o){vt(e,t,n,r,o,u).catch((function(t){e.error=!0,ft(r,t)}))}))}}},ht=gt,bt=function(e,t,n,r){var u=L()((function(r,u){var o,a=u[0].id;e.uploaded[a]=r.loaded;var i=re()(o=W()(e.uploaded)).call(o,(function(t,n){return t+e.uploaded[n]}),0);n({loaded:i,total:t.file.size},[t])}),100,!0);return{sendPromise:new k.a((function(n){ht(e,t,u,n,r)})),abort:function(){return function(e,t){var n;(T.debugLog("chunkedSender: aborting chunked upload for item: ".concat(t.id)),e.finished||e.aborted)||(V()(n=W()(e.requests)).call(n,(function(t){T.debugLog("chunkedSender: aborting chunk: ".concat(t)),e.requests[t].abort()})),e.aborted=!0);return e.aborted}(e,t)}}},mt=function(e,t,n,r,u,o){var a,i=function(e,t){var n,r,u,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.chunkSize,i=o?e.file.size-o:e.file.size;if(i<=0)throw new qe(_()(u="start byte ".concat(o," is invalid. File size: ")).call(u,e.file.size));var c=i<=a?1:Math.ceil(i/a);return Me()(n=xe()(r=new Array(c)).call(r,null)).call(n,(function(t,n){var r,u=a*n+(o||0);return{id:_()(r="".concat(e.id,"_chunk-")).call(r,n),start:u,end:Math.min(u+a,e.file.size),data:null,attempt:0,uploaded:0,index:n}}))}(e,t,r.startByte);T.debugLog(_()(a="chunkedSender: created ".concat(i.length," chunks for: ")).call(a,e.file.name));var c=fe()({finished:!1,aborted:!1,error:!1,uploaded:{},requests:{},responses:[],chunks:i,url:n,sendOptions:r},t),l=bt(c,e,u,o);return{request:l.sendPromise,abort:l.abort,senderType:at}},St=function(e,t){var n=function(e){return Object(ae.i)({},Pe,e)}(e);return{send:function(e,r,u,o){var a;return!n.chunked||e.length>1||e[0].url||!e[0].file.size?(a=ke(e,r,u,o),T.debugLog("chunkedSender: sending items as normal, un-chunked requests")):(T.debugLog("chunkedSender: sending file as a chunked request"),a=mt(e[0],n,r,u,o,t)),a}}},Et=function(e){return function(t,n){var r=St(e,n);return t.update({send:r.send}),t}},yt=Et,Ot=n("04Ix"),Rt=n.n(Ot),It=n("RSWj"),Lt=n.n(It),Ct=n("HnXd"),Tt=n.n(Ct),At=n("Vi3r"),Dt=n.n(At),wt=n("5PDf"),_t=n.n(wt),Ut=n("eLKs"),kt=n.n(Ut),Pt=n("STz3"),Nt=n.n(Pt),jt=n("cdeZ"),Bt=n.n(jt),Ht=n("/FZm"),xt=n.n(Ht),Ft=n("JlUD"),Mt=n.n(Ft),qt=Object(ae.b)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),zt=function(e,t){if(!Object(ae.e)(e))throw new Error("'".concat(t,"' is not a valid function"))},Gt=function(e){return void 0===e},Kt=q()("__le__"),Xt=q()("__le__pack__"),Wt=function(e){return e?e[Kt]:null},Qt=function(e){var t=Wt(e);if(!t)throw new Error("Didnt find LE internal object. Something very bad happened!");return t},Vt=function(e){return!!Wt(e)},Yt=function(e,t,n){var r,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];zt(n,"cb");var o=Qt(e);if(!o.options.allowRegisterNonExistent&&!~ce()(r=o.events).call(r,t))throw new Error("Cannot register for event ".concat(t.toString()," that wasn't already defined (allowRegisterNonExistent = false)"));var a=o.registry[t]||[];return xt()(a).call(a,(function(e){return e.cb===n}))||(a.push({name:t,cb:n,once:u}),o.registry[t]=a),function(){return un.call(e,t,n)}},Zt=function(e,t){var n,r,u=Qt(e).registry;return t?u[t]?de()(n=u[t]).call(n):[]:Bt()(r=Nt()(u)).call(r)},Jt={on:function(e,t){return Yt(this,e,t)},once:function(e,t){return Yt(this,e,t,!0)},off:un,getEvents:function(){var e;return de()(e=Qt(this).events).call(e)}},$t=function(){var e;return re()(e=Ie()(Jt)).call(e,(function(e,t){var n=$()(t,2),r=n[0],u=n[1];return e[r]={value:u},e}),{})},en={trigger:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];var o,a=Zt(this,e);if(a.length){var i,c,l,d;1===r.length&&!0===(null===(i=r[0])||void 0===i?void 0:i[Xt])&&(d=r[0].resolve()),o=Me()(c=_t()(l=Me()(a).call(a,(function(n){return n.once&&rn(t,e,n.cb),d?n.cb.apply(n,Dt()(d)):r.length?1===r.length?n.cb(r[0]):2===r.length?n.cb(r[0],r[1]):3===r.length?n.cb(r[0],r[1],r[2]):n.cb.apply(n,r):n.cb()}))).call(l,(function(e){return!Gt(e)}))).call(c,(function(e){return Mt()(e)?e:k.a.resolve(e)}))}return o&&(o.length?o:void 0)},addEvent:function(e){var t=Qt(this);if(!t.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");var n;if(~ce()(n=t.events).call(n,e))throw new Error("Event '".concat(e,"' already defined"));t.events.push(e)},removeEvent:function(e){var t=Qt(this);if(!t.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");var n,r,u=ce()(n=t.events).call(n,e);Ge()(r=t.events).call(r,u,1)},hasEvent:function(e){var t,n=Qt(this);return!!~ce()(t=n.events).call(t,e)},hasEventRegistrations:function(e){return!!Zt(this,e).length},assign:function(e){var t=Qt(this);return cn(e,t.options,t.events,t.registry,t.stats),tn(e)}},tn=function(e){var t;return re()(t=W()(en)).call(t,(function(t,n){var r;return t[n]=kt()(r=en[n]).call(r,e),t}),fe()({target:e},en))},nn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Qt(e).registry;!r[t]||!n&&r[t].length||delete r[t]},rn=function(e,t,n){var r,u=Qt(e).registry;u[t]&&(n?(u[t]=_t()(r=u[t]).call(r,(function(e){return e.cb!==n})),nn(e,t)):nn(e,t,!0))};function un(e,t){rn(this,e,t)}var on,an,cn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Tt()(e,fe()(Rt()({},Kt,{value:Lt()({registry:r,events:n,options:t,stats:u})}),$t()))},ln=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return e=e||{},n=fe()(fe()({},qt),n),Vt(e)||cn(e,n,t),tn(e)},dn=function(e){var t={resolve:function(){var t;return _()(t=[]).call(t,e())}};return H()(t,Xt,{value:!0,configurable:!1}),t},sn="rpldy-mock-sender",fn=n("Kwsy"),pn=n.n(fn),vn=Object(ae.b)({delay:500,fileSize:1e6,progressIntervals:[10,25,50,75,99]}),gn=function(e,t,n){return e.then((function(e){return T.debugLog("uploady.mockSender: mock request finished successfully"),{status:t.responseStatus||200,state:C.c.FINISHED,response:fe()(fe()({},e),{},{headers:{"x-request-type":"react-uploady.mockSender"},data:t.response||{sendOptions:n,mock:!0,success:!0}})}})).catch((function(){return T.debugLog("uploady.mockSender: mock request was aborted"),{status:0,state:C.c.ABORTED,response:"abort"}}))},hn=function(e){var t=fe()(fe()({},vn),e);return{send:function(e,n,r,u){T.debugLog("uploady.mockSender: about to make a mock request for items: ",e);var o=function(e,t){var n,r,u=performance.now(),o=[],a=!1,i=!1,c=null,l=null,d=null,s=function(){l&&(V()(l).call(l,(function(e){clearTimeout(e)})),l=null)},f=new k.a((function(t,n){d=n,pn()((function(){i=!0,t({options:e,time:performance.now()-u,progressEvents:o}),s()}),e.delay||0)}));e.progressIntervals&&(l=Me()(r=e.progressIntervals).call(r,(function(n){var r=n/100,u=(e.delay||0)*r;return pn()((function(){if(!a&&!i&&c){var n={total:e.fileSize||0,loaded:(e.fileSize||0)*r};o.push(n),c(n,t)}}),u)})));return{then:kt()(n=f.then).call(n,f),abort:function(){return a=!0,i=!0,d&&d(),s(),!0},onProgress:function(e){c=e}}}(t,e);return o.onProgress(u),{request:gn(o,t,r),abort:o.abort,senderType:sn}},update:function(e){t=fe()(fe()({},t),e)}}},bn=function(e){return function(t){var n=hn(e);return t.update({send:n.send}),t}},mn=hn,Sn=Object(ae.b)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND",ALL_ABORT:"ALL_ABORT"}),En=Object(ae.b)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),yn=[C.a.ADDED,C.a.PROCESSING,C.a.UPLOADING],On=function(e,t){return e.batches[t].batch},Rn=function(e,t,n){return e.getState().items[t].batchId===n},In=function(e,t){var n=e.getState(),r=n.items[t];return n.batches[r.batchId]},Ln=function(e,t){return In(e,t).batch},Cn=function(e,t){var n=function(e,t){return On(e.getState(),t)}(e,t);e.updateState((function(e){var t;V()(t=n.items).call(t,(function(t){var n,r=t.id;delete e.items[r];var u,o=ce()(n=e.itemQueue).call(n,r);~o&&Ge()(u=e.itemQueue).call(u,o,1)}))}))},Tn=function(e,t){e.updateState((function(e){delete e.batches[t]}))},An=function(e,t){var n=Ln(e,t);return e.getState().currentBatch!==n.id},Dn=function(e){var t=e.getState(),n=t.currentBatch;n&&t.batches[n]&&function(e){var t=e.getState().itemQueue;return 0===t.length||An(e,t[0])}(e)&&(wn(e,n,Sn.BATCH_FINISH),Cn(e,n),Tn(e,n))},wn=function(e,t,n){var r,u=e.getState(),o=On(u,t),a=u.items,i=fe()(fe()({},rt(o)),{},{items:Me()(r=o.items).call(r,(function(e){var t=e.id;return rt(a[t])}))});e.trigger(n,i)},_n=function(e,t){var n=Ln(e,t);return ct()(yn).call(yn,n.state)},Un=(on={},Rt()(on,C.c.ADDED,Sn.ITEM_START),Rt()(on,C.c.FINISHED,Sn.ITEM_FINISH),Rt()(on,C.c.ERROR,Sn.ITEM_ERROR),Rt()(on,C.c.CANCELLED,Sn.ITEM_CANCEL),Rt()(on,C.c.ABORTED,Sn.ITEM_ABORT),Rt()(on,C.c.UPLOADING,Sn.ITEM_PROGRESS),on),kn=[C.c.FINISHED,C.c.ERROR,C.c.CANCELLED,C.c.ABORTED],Pn=function(e){return!!~ce()(kn).call(kn,e.state)},Nn=function(e,t,n){return V()(t).call(t,(function(t){var n,r=e.getState(),u=t.id,o=t.info;if(T.debugLog("uploader.processor.queue: request finished for item - ",{id:u,info:o}),r.items[u]){e.updateState((function(e){var t=e.items[u];t.state=o.state,t.uploadResponse=o.response,Pn(t)&&delete e.aborts[u]}));var a=e.getState().items[u];o.state===C.c.FINISHED&&a.completed<100&&e.handleItemProgress(a,100,a.file?a.file.size:0),e.trigger(Un[a.state],a),Pn(a)&&e.trigger(Sn.ITEM_FINALIZE,a)}var i=ce()(n=r.itemQueue).call(n,u);~i&&e.updateState((function(e){var t,n;Ge()(t=e.itemQueue).call(t,i,1);var r,o=ce()(n=e.activeIds).call(n,u);~o&&Ge()(r=e.activeIds).call(r,o,1)}))})),Dn(e),n(e)},jn=Object(ae.c)({undefinedOverwrites:!0}),Bn=function(e,t){var n=Me()(t).call(t,(function(e){return e.id}));return e.updateState((function(e){var t;e.activeIds=_()(t=e.activeIds).call(t,n)})),function(e,t,n){return j(e.trigger,Sn.REQUEST_PRE_SEND,{items:t,options:n}).then((function(e){if(e){if(T.debugLog("uploader.queue: REQUEST_PRE_SEND event returned updated items/options",e),e.items){if(e.items.length!==t.length||!Object(ae.h)(e.items,t,["id","batchId","recycled"]))throw new Error("REQUEST_PRE_SEND event handlers must return same items with same ids");t=e.items}e.options&&(n=jn({},n,e.options))}return{items:t,options:n,cancelled:!1===e}}))}(e,t,e.getState().batches[t[0].batchId].batchOptions).then((function(n){if(!n.cancelled){var r;e.updateState((function(e){var r;V()(r=n.items).call(r,(function(t){e.items[t.id]=t})),e.batches[t[0].batchId].batchOptions=n.options}));var u=e.getState();n.items=Me()(r=n.items).call(r,(function(e){return u.items[e.id]})),n.options=u.batches[t[0].batchId].batchOptions}return n}))},Hn=function(e,t,n){var r,u=t.items,o=t.options,a=e.getState().batches[u[0].batchId].batch;try{r=e.sender.send(u,a,o)}catch(e){T.debugLog("uploader.queue: sender failed with unexpected error",e),r={request:k.a.resolve({status:0,state:C.c.ERROR,response:e.message}),abort:function(){return!1},senderType:"exception-handler"}}return function(e,t,n){e.updateState((function(e){V()(t).call(t,(function(t){e.items[t.id].state=C.c.UPLOADING,e.aborts[t.id]=n.abort}))}))}(e,u,r),r.request.then((function(t){var r=Me()(u).call(u,(function(e){return{id:e.id,info:t}}));Nn(e,r,n)}))},xn=function(e,t,n){var r=e.getState(),u=Nt()(r.items);return u=_t()(u).call(u,(function(e){return!!~ce()(t).call(t,e.id)})),k.a.all(Me()(u).call(u,(function(t){return e.runCancellable(Sn.ITEM_START,t)}))).then((function(t){var n;return{allowedItems:_t()(n=Me()(t).call(t,(function(t,n){return t?null:function(e,t){return t.getState().items[e]}(u[n].id,e)}))).call(n,Boolean),cancelledResults:t}})).then((function(r){var o=r.allowedItems,a=r.cancelledResults;return(o.length?Bn(e,o).then():k.a.resolve()).then((function(r){var o;return r&&(r.cancelled?a=Me()(t).call(t,(function(){return!0})):Hn(e,r,n)),function(e,t,n,r){var u,o=_t()(u=Me()(n).call(n,(function(e,n){return e?t[n].id:null}))).call(u,Boolean);if(o.length){var a=Me()(o).call(o,(function(e){return{id:e,info:{status:0,state:C.c.CANCELLED,response:"cancel"}}}));Nn(e,a,r)}return!!o.length}(e,u,a,n)||(o=n(e)),o}))}))},Fn=function(e,t){var n,r;return!!~ce()(n=Bt()(r=e.getState().activeIds).call(r)).call(n,t)},Mn=function(e){var t,n=e.getState().itemQueue,r=function(e){for(var t=e.getState(),n=t.itemQueue,r=t.items,u=0,o=n[u];o&&(Fn(e,o)||!_n(e,o)||r[o].state!==C.c.ADDED);)o=n[u+=1];return o?u:-1}(e),u=n[r];if(u){var o=In(e,u),a=o.batch.id,i=o.batchOptions.maxGroupSize||0;if(o.batchOptions.grouped&&i>1){t=[];for(var c=!0;t.length<i&&c;)t.push(u),c=(u=n[r+t.length])&&Rn(e,u,a)}else t=[u]}return t},qn=function(e){var t=Mn(e),n=k.a.resolve();if(t){var r=e.getCurrentActiveCount(),u=e.getOptions(),o=u.concurrent,a=void 0===o?0:o,i=u.maxConcurrent;if(!r||a&&r<(void 0===i?0:i)){T.debugLog("uploader.processor: Processing next upload - ",{ids:t,state:e.getState(),currentCount:r});var c=!1,l=k.a.resolve(!1);An(e,t[0])&&(l=function(e,t){var n=Ln(e,t);return e.runCancellable(Sn.BATCH_START,n).then((function(t){return t||e.updateState((function(e){e.currentBatch=n.id})),!t}))}(e,t[0]).then((function(n){return(c=!n)&&(!function(e,t){var n=Ln(e,t),r=n.id;T.debugLog("uploady.uploader.processor: cancelling batch: ",{batch:n}),e.updateState((function(e){On(e,r).state=C.a.CANCELLED})),wn(e,r,Sn.BATCH_CANCEL),Cn(e,r),Tn(e,r)}(e,t[0]),qn(e)),c}))),n=l.then((function(n){n||xn(e,t,qn)}))}}return n},zn=qn,Gn=function(e,t,n){var r=!1,u=e.getState(),o=u.items[t];return o&&function(e){return e===C.c.ADDED||e===C.c.UPLOADING}(o.state)&&(T.debugLog("uploader.queue: aborting item in progress - ",o),o.state===C.c.UPLOADING?(e.updateState((function(e){e.items[t].state=C.c.ABORTED})),r=u.aborts[t]()):(Nn(e,[{id:t,info:{status:0,state:C.c.ABORTED,response:"aborted"}}],n),r=!0)),r},Kn=function(e,t,n,r,u){var o=ut({itemQueue:[],currentBatch:null,batches:{},items:{},activeIds:[],aborts:{}}),a=o.state,i=o.update,c=function(){return a},l=function(e){i(e)},d=function(e){if(a.items[e.id]&&!e.recycled)throw new Error("Uploader queue conflict - item ".concat(e.id," already exists"));e.recycled&&function(e,t){var n=t.previousBatch;if(t.recycled&&n&&e.getState().batches[n]){var r=Ln(e,t.id).id;r===n&&e.updateState((function(e){var n,u,o=On(e,r),a=D()(n=o.items).call(n,(function(e){return e.id===t.id}));~a&&Ge()(u=o.items).call(u,a,1)}))}}(f,e),l((function(t){t.items[e.id]=e,t.itemQueue.push(e.id)}))},s=function(e,n,r){a.items[e.id]&&(l((function(t){var u=t.items[e.id];u.loaded=r,u.completed=n})),t(Sn.ITEM_PROGRESS,c().items[e.id]))};r.on(En.ITEM_PROGRESS,s),r.on(En.BATCH_PROGRESS,(function(e){var n,r=null===(n=a.batches[e.id])||void 0===n?void 0:n.batch.items;if(r){var u=re()(r).call(r,(function(e,t){return e[0]+=t.completed,e[1]+=t.loaded,e}),[0,0]),o=$()(u,2),i=o[0],c=o[1];l((function(t){var n=t.batches[e.id].batch;n.completed=i/r.length,n.loaded=c})),t(Sn.BATCH_PROGRESS,a.batches[e.id].batch)}}));var f={getOptions:function(){return e},getCurrentActiveCount:function(){return a.activeIds.length},getState:c,updateState:l,trigger:t,runCancellable:function(e){var t;if(!Object(ae.e)(n))throw new Error("cancellable is of wrong type");for(var r=arguments.length,u=new Array(r>1?r-1:0),o=1;o<r;o++)u[o-1]=arguments[o];return n.apply(void 0,_()(t=[e]).call(t,u))},sender:r,handleItemProgress:s};return Object(ae.d)()&&T.isDebugOn()&&(window["__rpldy_".concat(u,"_queue_state")]=f),{updateState:l,getState:f.getState,runCancellable:f.runCancellable,uploadBatch:function(e,t){var n;t&&l((function(n){n.batches[e.id].batchOptions=t})),V()(n=e.items).call(n,d),zn(f)},addBatch:function(e,t){return l((function(n){n.batches[e.id]={batch:e,batchOptions:t}})),On(a,e.id)},abortItem:function(e){return function(e,t,n){return Gn(e,t,n)}(f,e,zn)},abortBatch:function(e){!function(e,t,n){var r,u=e.getState().batches[t],o=null==u?void 0:u.batch;o&&o.state!==C.a.CANCELLED&&o.state!==C.a.FINISHED&&(V()(r=o.items).call(r,(function(t){return Gn(e,t.id,n)})),e.updateState((function(e){On(e,t).state=C.a.ABORTED})),wn(e,t,Sn.BATCH_ABORT))}(f,e,zn)},abortAll:function(){var e,t,n,r;t=zn,r=(e=f).getState().items,V()(n=W()(r)).call(n,(function(n){return Gn(e,n,t)})),e.trigger(Sn.ALL_ABORT)}}},Xn=function(){return!0},Wn=Object(ae.b)({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:Xn,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0}),Qn=function(e,t,n,r){!function(e,t,n,r){V()(e).call(e,(function(e){var u,o;T.debugLog(_()(u=_()(o="uploady.uploader.processor: file: ".concat(e.id," progress event: loaded(")).call(o,n,") - completed(")).call(u,t,")")),r(En.ITEM_PROGRESS,e,t,n)}))}(e,Math.min(n.loaded/n.total*100,100)/e.length,n.loaded/e.length,r),r(En.BATCH_PROGRESS,t)},Vn=function(){var e=ln({send:function(e,n,r){var u=r.destination,o=null==u?void 0:u.url,a=L()((function(r){return Qn(e,n,r,t)}),50,!0);return(Object(ae.e)(r.send)?r.send:ke)(e,o,{method:(null==u?void 0:u.method)||r.method||Wn.method,paramName:(null==u?void 0:u.filesParamName)||r.inputFieldName||"file",params:fe()(fe()({},r.params),null==u?void 0:u.params),forceJsonResponse:r.forceJsonResponse,withCredentials:r.withCredentials,formatGroupParamName:r.formatGroupParamName,headers:null==u?void 0:u.headers,sendWithFormData:r.sendWithFormData},a)}},Nt()(En)),t=e.trigger;return e.target},Yn=Object(ae.d)()&&"FileList"in window,Zn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;if(!Object(ae.g)())if(t<3&&Ze(e))n=rt(e);else if(t<3&&Je(e)){var r,u;n=Qe()(e)?Me()(r=W()(e)).call(r,(function(t){return Zn(e[t])})):re()(u=W()(e)).call(u,(function(n,r){return n[r]=Zn(e[r],t+1),n}),{})}return n},Jn=0,$n=function(e,t,n){var r;return Me()(r=_t()(Array.prototype).call(t,n||Xn)).call(r,(function(t){return K(t,e)}))},er=function(e,t,n){var r="batch-".concat(Jn+=1),u=function(e){return Yn&&e instanceof FileList||"[object FileList]"===e.toString()}(e);return e=Qe()(e)||u?e:[e],{id:r,uploaderId:t,items:$n(r,e,n.fileFilter),state:C.a.ADDED,completed:0,loaded:0}},tr=Nt()(Sn),nr=0,rr=function(e){var t="uploader-".concat(nr+=1),n=!1,r=[],u={};T.debugLog("uploady.uploader: creating new instance (".concat(t,")"),{options:e,counter:nr});var o=function(e){return fe()(fe()(fe()({},Wn),e),{},{destination:e&&e.destination?(t=e.destination,fe()({filesParamName:"file",params:{}},t)):null});var t}(e),a=function(){Ge()(r).call(r,0)},i=ln({id:t,update:function(e){return o=Object(ae.i)({},o,e),l},add:function(e,t){var n,u=Object(ae.i)({},o,t),i=p.addNewBatch(e,l.id,u);return i.items.length?n=p.runCancellable(Sn.BATCH_ADD,i,u).then((function(e){var t;e?(i.state=C.a.CANCELLED,d(Sn.BATCH_CANCEL,i)):(T.debugLog(_()(t="uploady.uploader [".concat(l.id,"]: new items added - auto upload =\n                        ")).call(t,String(u.autoUpload)),i.items),u.autoUpload?p.process(i):(u.clearPendingOnAdd&&a(),r.push({batch:i,uploadOptions:u})))})):T.debugLog("uploady.uploader: no items to add. batch ".concat(i.id," is empty. check fileFilter if this isn't intended")),n||k.a.resolve()},upload:function(e){var t;V()(t=Ge()(r).call(r,0)).call(t,(function(t){var n=t.batch,r=t.uploadOptions;return p.process(n,Object(ae.i)({},r,e))}))},abort:function(e){p.abort(e)},abortBatch:function(e){p.abortBatch(e)},getOptions:function(){return Object(ae.a)(o)},getPending:function(){return de()(r).call(r)},clearPending:a,registerExtension:function(e,t){R()(n,"Uploady - uploader extensions can only be registered by enhancers"),R()(!u[e],"Uploady - uploader extension by this name [%s] already exists",e),T.debugLog("uploady.uploader: registering extension: ".concat(e.toString()),t),u[e]=t},getExtension:function(e){return u[e]}},tr,{canAddEvents:!1,canRemoveEvents:!1}),c=i.trigger,l=i.target,d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var u=dn((function(){return Me()(n).call(n,Zn)}));return c(e,u)},s=P(d);if(o.enhancer){n=!0;var f=o.enhancer(l,d);n=!1,l=f||l}var p=function(e,t,n,r){var u=Vn(),o=Kn(n,e,t,u,r);return{process:function(e,t){o.uploadBatch(e,t)},abortBatch:function(e){o.abortBatch(e)},abort:function(e){e?o.abortItem(e):o.abortAll()},addNewBatch:function(e,t,n){var r=er(e,t,n);return o.addBatch(r,n)},runCancellable:o.runCancellable}}(d,s,o,l.id);return Object(ae.b)(l)},ur=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];return re()(t).call(t,(function(e,t){var n;return t.apply(void 0,_()(n=[e]).call(n,r))||e}),e)}},or=rr,ar=q()("__upldy-retry__"),ir="RETRY_EVENT",cr=function(e,t,n,r,u){var o,a=t.getState().failed;r=r||W()(a);var i,c=_t()(o=Me()(r).call(r,(function(e){return a[e]}))).call(o,Boolean);c.length&&(u=fe()(fe()({},u||null),{},{autoUpload:void 0===(null===(i=u)||void 0===i?void 0:i.autoUpload)||u.autoUpload}),n(ir,{items:c,options:u}),V()(r).call(r,(function(e){return function(e,t){e.updateState((function(e){var n,r,u=e.failed[t].batchId;delete e.failed[t];var o=ce()(n=e.batchIdsMap[u]).call(n,t);Ge()(r=e.batchIdsMap[u]).call(r,o,1),e.batchIdsMap[u].length||delete e.batchIdsMap[u]}))}(t,e)})),e.add(c,u));return!!c.length},lr=function(e,t,n,r,u){var o;return r?o=function(e,t,n,r,u){return T.debugLog("uploady.retry: about to retry item: ".concat(r)),cr(e,t,n,[r],u)}(e,t,n,r,u):(T.debugLog("uploady.retry: about to retry all failed item"),o=cr(e,t,n,null,u)),o},dr=function(e,t){var n,r,u,o=(n=ut({batchIdsMap:{},failed:{}}),r=n.state,u=n.update,{updateState:function(e){u(e)},getState:function(){return r}});return function(e,t){var n=function(e){t.updateState((function(t){t.failed[e.id]=e,(t.batchIdsMap[e.batchId]=t.batchIdsMap[e.batchId]||[]).push(e.id)}))};e.on(Sn.ITEM_ERROR,n),e.on(Sn.ITEM_ABORT,n)}(e,o),e.registerExtension(ar,{retry:function(n,r){return lr(e,o,t,n,r)},retryBatch:function(n,r){return function(e,t,n,r,u){var o;T.debugLog("uploady.retry: about to retry batch: ".concat(r));var a=null===(o=t.getState().batchIdsMap[r])||void 0===o?void 0:de()(o).call(o);return!!a&&cr(e,t,n,a,u)}(e,o,t,n,r)}}),e},sr=n("MAKL"),fr=n.n(sr),pr=function(e){var t=!1;!function(){try{if(Object(ae.d)()&&e in window){window[e].setItem("__lsTest","__test-".concat(fr()())),window[e].removeItem("__lsTest"),t=!0}}catch(e){}}();var n=["key","getItem","setItem","removeItem","clear"],r=re()(n).call(n,(function(n,r){return n[r]=function(){var n;return t?(n=window[e])[r].apply(n,arguments):null},n}),{});return r.isSupported=t,H()(r,"length",{get:function(){return t?window[e].length:0}}),r},vr=pr("localStorage"),gr=pr("sessionStorage"),hr=Object(ae.b)(fe()(fe()({},Pe),{},{featureDetection:!1,featureDetectionUrl:null,version:"1.0.0",resume:!0,overrideMethod:!1,deferLength:!1,sendDataOnCreate:!1,storagePrefix:"__rpldy-tus__",lockedRetryDelay:2e3,forgetOnSuccess:!1,ignoreModifiedDateInStorage:!1})),br=n("WxoT"),mr=n.n(br),Sr=function(e,t,n){var r,u,o=_t()(r=[e.file.name,e.file.type,e.file.size,t.ignoreModifiedDateInStorage?null:e.file.lastModified,n]).call(r,Boolean).join("/");return _()(u="".concat(t.storagePrefix||hr.storagePrefix)).call(u,o)},Er=function(e,t,n,r){n.resume&&vr.setItem(Sr(e,n,r),mr()({time:fr()(),uploadUrl:t}))},yr=function(e,t,n){var r,u=Sr(e,t,n);if(t.resume)try{var o=vr.getItem(u);if(o)r=JSON.parse(o).uploadUrl}catch(e){T.debugLog("tusSender.resumableStore: failed to retrieve persisted data for key: ".concat(u),e)}return r},Or=function(e,t,n){var r=Sr(e,t,n);vr.removeItem(r)},Rr=function(e){for(var t=e.storagePrefix||hr.storagePrefix,n=0;n<vr.length;n++){var r=vr.key(n);r&&!ce()(r).call(r,t)&&vr.removeItem(r)}},Ir=n("lHQ6"),Lr=n.n(Ir),Cr=q()("__upldy-tus__"),Tr="rpldy-tus-sender",Ar=[200,201,204],Dr="creation-with-upload",wr="concatenation",_r="creation-defer-length",Ur=function(e){var t=e.params&&W()(e.params);return(null==t?void 0:t.length)?Me()(t).call(t,(function(t){var n;return _()(n="".concat(t," ")).call(n,btoa(e.params[t]))})).join(","):void 0},kr=function(e,t){return e.then((function(e){return e.state===C.c.FINISHED&&(e.response.location=t),e}))},Pr=function(e,t,n,r,u){var o,a=n.getState().options,i=fe()({"tus-resumable":a.version,"Upload-Defer-Length":a.deferLength?1:void 0,"Upload-Length":a.deferLength?void 0:e.file.size,"Upload-Metadata":u?void 0:Ur(r),"Content-Type":a.sendDataOnCreate?"application/offset+octet-stream":void 0},r.headers),c=null;if(T.debugLog(_()(o="tusSender.create - creating upload for ".concat(e.id," at: ")).call(o,t)),a.sendDataOnCreate){T.debugLog("tusSender.create - adding first chunk to create request");var l=+a.chunkSize;c=l<e.file.size?Be(e.file,0,l):e.file}var d=oe(t,c,{method:"POST",headers:i}),s=!1;return{request:d.then((function(r){var u=null;return r&&~ce()(Ar).call(Ar,r.status)?u=function(e,t,n,r,u){var o,a,i,c=n.getState().options,l=(a=t,i=r.getResponseHeader("Location"),/^(http:|https:)?\/\//.test(i)?i:[a.replace(/\/$/,""),i.replace(/^\//,"")].join("/")),d=0,s=!1;if(T.debugLog(_()(o="tusSender.create: successfully created upload for item: ".concat(e.id," - upload url = ")).call(o,l)),c.sendDataOnCreate){var f=Lr()(r.getResponseHeader("Upload-Offset"));d=isNaN(f)?d:f,s=+c.parallel>1&&d===(null==u?void 0:u.size)}return n.updateState((function(t){t.items[e.id].uploadUrl=l,t.items[e.id].offset=d})),{offset:d,uploadUrl:l,isNew:!0,isDone:s}}(e,t,n,r,c):T.debugLog("tusSender.create: create upload failed for item: ".concat(e.id),r),u})).catch((function(e){return T.debugLog("tusSender.create: create upload failed",e),null})).finally((function(){s=!0})),abort:function(){return s||(T.debugLog("tusSender.create: aborting create request for item: ".concat(e.id)),d.xhr.abort()),!s}}},Nr=function(e,t,n){return Or(e,t,n),{isNew:!1,canResume:!1}},jr=function(e,t,n,r,u){var o,a,i=n.getState().options;T.debugLog(_()(o=_()(a="tusSender.resume - resuming upload for ".concat(e.id)).call(a,r?"-".concat(r):""," at: ")).call(o,t));var c=oe(t,null,{method:"HEAD",headers:{"tus-resumable":i.version}}),l=!1;return{request:c.then((function(o){var a;if(o&&~ce()(Ar).call(Ar,o.status))a=function(e,t,n,r){var u,o=!1,a=!1;T.debugLog(_()(u="tusSender.resume - successfully initiated resume for item: ".concat(e.id," - upload url = ")).call(u,t));var i=Lr()(r.getResponseHeader("Upload-Offset"));if(!isNaN(i)){var c=Lr()(r.getResponseHeader("Upload-Length"));isNaN(c)&&!n.getState().options.deferLength||(o=!(a=i===c),n.updateState((function(n){n.items[e.id].uploadUrl=t,n.items[e.id].offset=i})))}return{offset:i,uploadUrl:t,isNew:!1,isDone:a,canResume:o}}(e,t,n,o);else if(423===(null==o?void 0:o.status)&&0===u){var c;T.debugLog(_()(c="tusSender.resume: upload is locked for item: ".concat(e.id,". Will retry in ")).call(c,+i.lockedRetryDelay),o),a=function(e,t,n,r,u){return new k.a((function(o){pn()((function(){jr(e,t,n,r,u).request.then(o)}),n.getState().options.lockedRetryDelay)}))}(e,t,n,r,1)}else{var l;T.debugLog(_()(l="tusSender.resume: failed for item: ".concat(e.id)).call(l,r?"-".concat(r):""),o),a=Nr(e,i,r)}return a})).catch((function(t){return T.debugLog("tusSender.resume: resume upload failed unexpectedly",t),Nr(e,i,r)})).finally((function(){l=!0})),abort:function(){return l||(T.debugLog("tusSender.resume: aborting resume request for item: ".concat(e.id)),c.xhr.abort()),!l}}},Br=function(e,t,n,r){return jr(e,t,n,r,0)},Hr=function(e,t,n,r,u){return u.then((function(u){var o=u;if(u.state===C.c.FINISHED){var a=n.getState(),i=a.options,c=a.items,l=c[e.id];if(l){var d,s,f=l.parallelChunks,p=Me()(d=_t()(f).call(f,(function(e){var t;return null===(t=c[e])||void 0===t?void 0:t.uploadUrl}))).call(d,(function(e){return c[e].uploadUrl}));if(p.length!==f.length)throw new Error(_()(s="tusSender: something went wrong. found ".concat(p.length," upload urls for ")).call(s,f.length," chunks"));var v={"tus-resumable":i.version,"Upload-Concat":"final;".concat(p.join(" ")),"Upload-Metadata":Ur(r)};T.debugLog("tusSender.finalizeParallel: sending finalizing request",{url:t,headers:v});var g=oe(t,null,{method:"POST",headers:v});n.updateState((function(t){t.items[e.id].abort=function(){return g.xhr.abort(),!0}})),o=function(e,t){return e.catch((function(e){return T.debugLog("tusSender.finalizeParallel: finalize request failed unexpectedly!",e),e})).then((function(e){var n,r=(null==e?void 0:e.status)||0,u=!!~ce()(Ar).call(Ar,r),o=u&&(null==e?void 0:e.getResponseHeader)&&e.getResponseHeader("Location");return o?(T.debugLog("tusSender.finalizeParallel: successfully finalized parallel upload",o),n=kr(k.a.resolve(t),o)):(T.debugLog("tusSender.finalizeParallel: parallel upload finalize failed!",r),n={status:r,state:C.c.ERROR,response:{message:(null==e?void 0:e.response)||(u&&!o?"No valid location header for finalize request":"")}}),n}))}(g,u)}}return o}))},xr=function(e,t,n,r,u,o,a,i,c){return a.then((function(a){var l,d=!1;if(a?a.isDone?(T.debugLog("tusSender.handler: resume found server has completed file for item: ".concat(e[0].id),e[0]),l=kr(k.a.resolve({status:200,state:C.c.FINISHED,response:{message:"TUS server has file"}}),a.uploadUrl)):a.isNew||a.canResume?l=c?function(e,t,n,r){var u=e[0];return n.uploadUrl&&Er(u,n.uploadUrl,t.getState().options,r),T.debugLog("tusSender.handler: created upload for parallelized chunk: ".concat(u.id)),k.a.resolve({status:200,state:C.c.UPLOADING,response:"TUS server created upload for parallelized part"})}(e,u,a,c):function(e,t,n,r,u,o,a){var i=u.getState().options,c=e[0];T.debugLog("tusSender.handler: init request finished. sending item ".concat(c.id," as chunked"),a),a.isNew&&a.uploadUrl&&Er(c,a.uploadUrl,i),(a.canResume||i.sendDataOnCreate&&a.offset)&&(n=fe()(fe()({},n),{},{startByte:a.offset}));var l=o.send(e,t,n,r);return u.updateState((function(e){e.items[c.id].abort=l.abort})),+i.parallel>1?Hr(c,t,u,n,l.request):kr(l.request,a.uploadUrl)}(e,t,n,r,u,o,a):d=!0:d=i,d){T.debugLog("tusSender.handler: resume init failed. Will try creating a new upload for item: ".concat(e[0].id));var s=Pr(e[0],t,u,n).request;l=xr(e,t,n,r,u,o,s)}return l||k.a.resolve({status:0,state:C.c.ERROR,response:"TUS initialize failed"})}))},Fr=xr,Mr=function(e,t){t.updateState((function(t){t.items[e.id]={id:e.id,uploadUrl:null,size:e.file.size,offset:0,parallelChunks:[]}}))},qr=function(e,t,n,r,u,o){var a,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=u.getState(),l=c.options,d=+l.parallel>1&&!i,s=e[0],f=!d&&yr(s,l,i);Mr(s,u),a=d?{request:k.a.resolve({isNew:!0}),abort:function(){return!0}}:f?Br(s,f,u,i):Pr(s,t,u,n,i);var p=Fr(e,t,n,r,u,o,a.request,!!f,i),v=function(){return T.debugLog("tusSender.handler: abort called for item: ".concat(s.id)),a.abort(),a.request.then((function(e){if(e){T.debugLog("tusSender.handler: aborting chunked upload for item:  ".concat(s.id));var t=u.getState().items[s.id].abort;t&&t()}})),!0};return{request:p,abort:v}},zr=function(e,t){var n;return _()(n="_prlChunk_".concat(+e.chunkSize,"_")).call(n,t)},Gr=function(e,t,n){je&&(e.on(Sn.ITEM_FINALIZE,(function(e){var n=t.getState(),r=n.items,u=n.options,o=r[e.id];if(o){var a;T.debugLog(_()(a="tusSender.handleEvents: item ".concat(e.id," finalized (")).call(a,e.state,"). Removing from state"));var i=o.parallelChunks;t.updateState((function(t){i.length&&V()(i).call(i,(function(e){delete t.items[e]})),delete t.items[e.id]})),u.forgetOnSuccess&&(T.debugLog("tusSender.handleEvents: forgetOnSuccess enabled, removing item url from storage: ".concat(e.id)),Or(e,u))}})),e.on(ot.CHUNK_START,(function(e){var r=+t.getState().options.parallel>1;return(r?function(e,t,n){var r=n.item,u=n.chunkItem,o=n.url,a=n.sendOptions,i=n.onProgress,c=n.chunk,l=e.getState().options;return e.updateState((function(e){e.items[r.id].parallelChunks.push(u.id)})),qr([u],o,fe()(fe()({},a),{},{params:null}),i,e,t,zr(l,c.index)).request.then((function(e){return e.state!==C.c.FINISHED}))}(t,n,e):k.a.resolve(!0)).then((function(n){return n&&function(e,t,n){var r=t.item,u=t.chunk,o=t.chunkItem,a=t.chunkCount,i=e.getState().options,c=e.getState().items[n?o.id:r.id],l=n?0:c.offset||u.start,d={"tus-resumable":i.version,"Upload-Offset":l,"Content-Type":"application/offset+octet-stream","Content-Range":void 0,"X-HTTP-Method-Override":i.overrideMethod?"PATCH":void 0,"Upload-Length":i.deferLength&&u.index===a-1?r.file.size:void 0,"Upload-Concat":n?"partial":void 0};return T.debugLog("tusSender.handleEvents: chunk start handler. offset = ".concat(l),{headers:d,url:c.uploadUrl}),{sendOptions:{sendWithFormData:!1,method:i.overrideMethod?"POST":"PATCH",headers:d},url:c.uploadUrl}}(t,e,r)}))})),e.on(ot.CHUNK_FINISH,(function(e){var n=e.item,r=e.chunk,u=e.uploadData,o=t.getState(),a=o.items,i=o.options;if(+i.parallel>1){if(i.forgetOnSuccess){var c=zr(i,r.index);T.debugLog("tusSender.handleEvents: forgetOnSuccess enabled, removing parallel chunk url from storage: ".concat(c)),Or(n,i,c)}}else if(a[n.id]){var l,d,s=u.status,f=u.response;T.debugLog(_()(l=_()(d="tusSender.handleEvents: received upload response (code: ".concat(s,") for : ")).call(d,n.id,", chunk: ")).call(l,r.id),f),~ce()(Ar).call(Ar,s)&&f.headers&&t.updateState((function(e){e.items[n.id].offset=f.headers["upload-offset"]}))}})))},Kr=function(e){var t;return _()(t="".concat("rpldy_tus_fd_")).call(t,e)},Xr=(an={},Rt()(an,wr,(function(e,t){+t.getState().options.parallel>1&&!~ce()(e).call(e,wr)&&(T.debugLog("tusSender.featureDetection: disabling parallel uploads, ".concat(wr," extension not available")),t.updateState((function(e){e.options.parallel=1})))})),Rt()(an,Dr,(function(e,t){t.getState().options.sendDataOnCreate&&!~ce()(e).call(e,Dr)&&(T.debugLog("tusSender.featureDetection: disabling create with data, ".concat(Dr," extension not available")),t.updateState((function(e){e.options.sendDataOnCreate=!1})))})),Rt()(an,_r,(function(e,t){t.getState().options.deferLength&&!~ce()(e).call(e,_r)&&(T.debugLog("tusSender.featureDetection: disabling defer length, ".concat(_r," extension not available")),t.updateState((function(e){e.options.deferLength=!1})))})),an),Wr=function(e,t,n){var r=e.getState().options;if(t){T.debugLog("tusSender.featureDetection: retrieved extensions from server",t);var u=t.split(",");if(u.length&&r.onFeaturesDetected){var o=r.onFeaturesDetected(u);o&&e.updateState((function(e){e.options=Object(ae.i)({},e.options,o)}))}else{var a;V()(a=W()(Xr)).call(a,(function(t){Xr[t](u,e)}))}}n&&n!==e.getState().options.version&&(T.debugLog("tusSender.featureDetection: setting version to server version: ".concat(n)),e.updateState((function(e){e.options.version=n}))),e.updateState((function(e){e.featureDetection={processed:!0,version:n,extensions:t}}))},Qr=function(e,t,n){return e.catch((function(e){T.debugLog("tusSender.featureDetection: failed to retrieve data from server",e)})).then((function(e){if(e&&~ce()(Ar).call(Ar,e.status)){var r=e.getResponseHeader("Tus-Extension"),u=e.getResponseHeader("Tus-Resumable");r&&gr.setItem(Kr(t),mr()({extensions:r,versions:u})),Wr(n,r,u)}}))},Vr=function(e,t){var n=t.getState().options,r=oe(e,null,{method:"OPTIONS",headers:{"tus-resumable":n.version}});return{request:Qr(r,e,t),abort:function(){return r.xhr.abort(),!0}}},Yr=function(e,t){var n,r=t.getState(),u=r.options,o=r.featureDetection;e=u.featureDetectionUrl||e,T.debugLog("tusSender.featureDetection: about to request server info",e);var a=gr.getItem(Kr(e));return o.processed||(n=a?function(e,t,n){var r;try{(r=JSON.parse(n)).extensions?(T.debugLog("tusSender.featureDetection: retrieved feature detection data from session storage",r),Wr(t,r.extensions,r.version)):r=null}catch(e){T.debugLog("tusSender.featureDetection: failed to load feature detection data from session storage")}return r||gr.removeItem(Kr(e)),r?null:Vr(e,t)}(e,t,a):Vr(e,t)),n},Zr=function(e,t){return je?function(n,r,u,o){var a;if(!r)throw new Oe(Tr);if(n.length>1||n[0].url)a=e.send(n,r,u,o);else{T.debugLog("tusSender: sending file using TUS protocol");var i=t.getState().options.featureDetection?Yr(r,t):null,c=function(e,t,n,r,u,o,a){var i,c=function(){var a=qr(e,t,n,r,u,o);return i=a.abort,a.request};return{request:a?a.request.then(c,c):c(),abort:function(){return i?i():(null==a?void 0:a.abort())||!1}}}(n,r,u,o,t,e,i);a={request:c.request,abort:c.abort,senderType:Tr}}return a}:ke},Jr=function(e){return((e=function(e){return Object(ae.i)({},hr,e)}(e)).sendDataOnCreate||e.parallel)&&e.deferLength&&(T.debugLog("tusSender: turning off deferLength - cannot be used when sendDataOnCreate or parallel is enabled"),e.deferLength=!1),e.chunked=!0,e},$r=function(e,t,n){t=Jr(t);var r=St(t,n),u=function(e,t){var n=ut({options:t,items:{},featureDetection:{extensions:null,version:null,processed:!1}}),r=n.state,u={getState:function(){return r},updateState:n.update};return Object(ae.d)()&&T.isDebugOn()&&(window["__rpldy_".concat(e.id,"_tus_state")]=u),u}(e,t);return Gr(e,u,r),{send:Zr(r,u),getOptions:function(){return u.getState().options}}},eu=function(e){return function(t,n){var r=$r(t,e,n);return t.update({send:r.send}),t.registerExtension(Cr,{getOptions:r.getOptions}),t}},tu=eu,nu=n("EcSs"),ru=n.n(nu),uu=n("tpxy"),ou=n.n(uu),au=n("cDcd"),iu=n.n(au),cu=function(e,t){var n,r;t?n=t:T.debugLog("Uploady context - didn't receive input field ref - waiting for external ref");var u=function(){var e;return null===(e=n)||void 0===e?void 0:e.current},o=function(){var e=u();R()(e,"Uploady - Context. File input isn't available"),e.removeEventListener("change",o);var t=r;r=null,a(e.files,t)},a=function(t,n){e.add(t,n)};return{hasUploader:function(){return!!e},setExternalFileInput:function(e){n=e},showFileUpload:function(e){var t=u();R()(t,"Uploady - Context. File input isn't available"),r=e,t.removeEventListener("change",o),t.addEventListener("change",o),t.value="",t.click()},upload:a,processPending:function(t){e.upload(t)},setOptions:function(t){e.update(t)},getOptions:function(){return e.getOptions()},getExtension:function(t){return e.getExtension(t)},abort:function(t){e.abort(t)},abortBatch:function(t){e.abortBatch(t)},on:function(t,n){return e.on(t,n)},once:function(t,n){return e.once(t,n)},off:function(t,n){return e.off(t,n)}}},lu=iu.a.createContext(null),du=function(e){return R()(e&&e.hasUploader(),"Uploady - valid UploadyContext not found. Make sure you render inside <Uploady>"),e},su=function(){return du(Object(au.useContext)(lu))},fu=function(e,t){var n=su(),r=n.on,u=n.off;Object(au.useEffect)((function(){return r(e,t),function(){u(e,t)}}),[e,t,r,u])},pu=function(e,t){return function(n,r){var u=Object(au.useState)(null),o=$()(u,2),a=o[0],i=o[1],c=Object(au.useCallback)((function(e){if(!r||e.id===r){for(var u,o,a=arguments.length,c=new Array(a>1?a-1:0),l=1;l<a;l++)c[l-1]=arguments[l];if(i(t.apply(void 0,_()(u=[e]).call(u,c))),n)n.apply(void 0,_()(o=[e]).call(o,c))}}),[n,r]);return fu(e,c),a}},vu=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r){var u=Object(au.useCallback)((function(e){for(var u,o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return!n||t&&r&&e.id!==r?void 0:n.apply(void 0,_()(u=[e]).call(u,a))}),[n,r]);fu(e,u)}},gu=function(e,t){Object(ae.g)()||e||console.warn(t)},hu=vu(Sn.BATCH_ADD,!1),bu=vu(Sn.BATCH_START),mu=vu(Sn.BATCH_FINISH),Su=vu(Sn.BATCH_CANCEL),Eu=vu(Sn.BATCH_ABORT),yu=pu(Sn.BATCH_PROGRESS,(function(e){return fe()({},e)})),Ou=vu(Sn.ITEM_START),Ru=vu(Sn.ITEM_FINISH),Iu=vu(Sn.ITEM_CANCEL),Lu=vu(Sn.ITEM_ERROR),Cu=vu(Sn.ITEM_ABORT),Tu=vu(Sn.ITEM_FINALIZE),Au=pu(Sn.ITEM_PROGRESS,(function(e){return fe()({},e)})),Du=vu(Sn.REQUEST_PRE_SEND,!1),wu=vu(Sn.ALL_ABORT,!1),_u=function(e){var t=su();return e&&t.setOptions(e),t.getOptions()},Uu=function(){var e=su();return Object(au.useCallback)((function(t){return e.abort(t)}),[e])},ku=function(){var e=su();return Object(au.useCallback)((function(t){return e.abortBatch(t)}),[e])},Pu=function(){var e=su();return Object(au.useCallback)((function(){return e.abort()}),[e])},Nu=function(e){var t=e.listeners,n=e.debug,r=e.children,u=e.inputRef,o=ou()(e,["listeners","debug","children","inputRef"]);T.setDebug(!!n),T.debugLog("@@@@@@ Uploady Rendering @@@@@@",e);var a=function(e,t){var n=Object(au.useMemo)((function(){return T.debugLog("Uploady creating a new uploader instance",e),or(e)}),[e.enhancer]);return n.update(e),Object(au.useEffect)((function(){var e;t&&(T.debugLog("Uploady setting event listeners",t),V()(e=Ie()(t)).call(e,(function(e){var t=$()(e,2),r=t[0],u=t[1];n.on(r,u)})));return function(){var e;t&&(T.debugLog("Uploady removing event listeners",t),V()(e=Ie()(t)).call(e,(function(e){var t=$()(e,2),r=t[0],u=t[1];return n.off(r,u)})))}}),[t,n]),n}(o,t),i=Object(au.useMemo)((function(){return cu(a,u)}),[a,u]);return iu.a.createElement(lu.Provider,{value:i},r)},ju=function(e){return function(t){var n=su(),r=t.id,u=Object(au.useState)({update:null,data:null}),o=$()(u,2),a=o[0],i=o[1];return Object(au.useLayoutEffect)((function(){var e=function(t){var u;return xt()(u=t.items).call(u,(function(e){return e.id===r}))&&new k.a((function(r){i((function(){return{update:function(t){n.off(Sn.REQUEST_PRE_SEND,e),r(t)},data:t}}))}))};return r&&n.on(Sn.REQUEST_PRE_SEND,e),function(){r&&n.off(Sn.REQUEST_PRE_SEND,e)}}),[n,r]),iu.a.createElement(e,ru()({},t,{updateRequest:a.update,requestData:a.data}))}},Bu=n("faye"),Hu=n.n(Bu),xu=function(e,t,n){return iu.a.createElement("input",ru()({},e,{name:t.inputFieldName,type:"file",ref:n}))},Fu=Object(au.memo)(Object(au.forwardRef)((function(e,t){var n=e.container,r=e.noPortal,u=ou()(e,["container","noPortal"]),o=_u(),a=n&&1===n.nodeType;return R()(a||!Object(ae.d)(),"Uploady - Container for file input must be a valid dom element"),r?xu(u,o,t):function(e,t,n,r,u){return e&&t?Hu.a.createPortal(xu(n,r,u),e):null}(n,a,u,o,t)}))),Mu=function(e){var t=e.multiple,n=void 0===t||t,r=e.capture,u=e.accept,o=e.webkitdirectory,a=e.children,i=e.inputFieldContainer,c=e.customInput,l=e.fileInputId,d=e.noPortal,s=void 0!==d&&d,f=ou()(e,["multiple","capture","accept","webkitdirectory","children","inputFieldContainer","customInput","fileInputId","noPortal"]),p=c?null:i||(Object(ae.d)()?document.body:null),v=Object(au.useRef)();return iu.a.createElement(Nu,ru()({},f,{inputRef:v}),c?null:iu.a.createElement(Fu,{container:p,multiple:n,capture:r,accept:u,webkitdirectory:o,style:{display:"none"},ref:v,id:l,noPortal:s}),a)},qu=n("pPxq"),zu=n.n(qu),Gu=function(e){var t=e.closest("form"),n={filesParamName:e.getAttribute("name"),method:void 0,url:void 0};if(t){var r,u=t.getAttribute("method"),o=function(e){var t,n,r,u,o,a,i,c,l=window.location,d=e.getAttribute("action")||"";switch(d=d.replace(/\s/g,""),!0){case""===d:d=l.href;break;case zu()(d).call(d,"/"):d=_()(t=_()(n="".concat(l.protocol,"//")).call(n,l.host)).call(t,d);break;case!/:\/\//.test(d):c=_()(r=de()(u=l.pathname.split("/")).call(u,0,-1)).call(r,"").join("/"),d=_()(o=_()(a=_()(i="".concat(l.protocol,"//")).call(i,l.host)).call(a,c)).call(o,d)}return d}(t);n.method=u?u.toUpperCase():void 0,n.url=o,T.debugLog(_()(r="Uploady.useFileInput: using custom input's parent form url ".concat(n.url," and method ")).call(r,n.method||""))}return n},Ku=function(e){var t=su();t.setExternalFileInput(e),Object(au.useEffect)((function(){if(e.current&&e.current.closest){var n=e.current,r=t.getOptions();if(!r.destination||!r.destination.url){var u=Gu(n);t.setOptions({destination:u})}}}),[e,t])},Xu=Mu;gu(je||!Object(ae.d)(),"This browser doesn't support chunking. Consider using @rpldy/uploady instead");var Wu=function(e){var t=e.chunked,n=e.chunkSize,r=e.retries,u=e.parallel,o=ou()(e,["chunked","chunkSize","retries","parallel"]),a=Object(au.useMemo)((function(){return je?function(e,t){var n=yt(e);return t?ur(n,t):n}({chunked:t,chunkSize:n,retries:r,parallel:u},e.enhancer):void 0}),[e.enhancer,t,n,r,u]);return iu.a.createElement(Xu,ru()({},o,{enhancer:a}))},Qu=vu(ot.CHUNK_START,!1),Vu=vu(ot.CHUNK_FINISH,!1),Yu=Wu,Zu="Uploady - retry was not registered. Make sure you used the enhancer",Ju=function(){var e=su().getExtension(ar);return R()(e,Zu),e.retry},$u=function(){var e=su().getExtension(ar);return R()(e,Zu),e.retryBatch},eo=vu(ir,!1),to=dr;gu(je,"This browser doesn't support chunking. Consider using @rpldy/uploady instead");var no=function(e){var t=e.chunked,n=e.chunkSize,r=e.retries,u=e.parallel,o=e.version,a=e.featureDetection,i=e.featureDetectionUrl,c=e.onFeaturesDetected,l=e.resume,d=e.deferLength,s=e.overrideMethod,f=e.sendDataOnCreate,p=e.storagePrefix,v=e.lockedRetryDelay,g=e.forgetOnSuccess,h=e.ignoreModifiedDateInStorage,b=ou()(e,["chunked","chunkSize","retries","parallel","version","featureDetection","featureDetectionUrl","onFeaturesDetected","resume","deferLength","overrideMethod","sendDataOnCreate","storagePrefix","lockedRetryDelay","forgetOnSuccess","ignoreModifiedDateInStorage"]),m=Object(au.useMemo)((function(){return je?function(e,t){var n=eu(e);return t?ur(n,t):n}({chunked:t,chunkSize:n,retries:r,parallel:u,version:o,featureDetection:a,featureDetectionUrl:i,onFeaturesDetected:c,resume:l,deferLength:d,overrideMethod:s,sendDataOnCreate:f,storagePrefix:p,lockedRetryDelay:v,forgetOnSuccess:g,ignoreModifiedDateInStorage:h},e.enhancer):void 0}),[e.enhancer,t,n,r,u,o,a,i,c,l,d,s,f,p,v,g,h]);return iu.a.createElement(Xu,ru()({},b,{enhancer:m}))},ro=function(){var e=su().getExtension(Cr);return R()(e,"Uploady - tus was not registered. Make sure you used the enhancer"),function(){return Rr(e.getOptions())}},uo=no,oo=function(e){return Object(au.forwardRef)((function(t,n){var r=su().showFileUpload,u=t.id,o=t.className,a=t.text,i=t.children,c=t.extraProps,l=t.onClick,d=ou()(t,["id","className","text","children","extraProps","onClick"]),s=Object(au.useRef)();s.current=d;var f=Object(au.useCallback)((function(e){r(s.current),null==l||l(e)}),[r,s,l]);return iu.a.createElement(e,ru()({ref:n,onClick:f,id:u,className:o,children:i||a||"Upload"},c))}))},ao=oo(Object(au.forwardRef)((function(e,t){return iu.a.createElement("button",ru()({ref:t},e))}))),io=ao,co=n("ALC1"),lo=Object(au.forwardRef)((function(e,t){var n=Object(au.useRef)(null);Object(au.useImperativeHandle)(t,(function(){return n.current}),[]);var r=su().upload,u=e.className,o=e.id,a=e.children,i=e.onDragOverClassName,c=e.dropHandler,l=e.htmlDirContentParams,d=e.extraProps,s=ou()(e,["className","id","children","onDragOverClassName","dropHandler","htmlDirContentParams","extraProps"]),f=Object(au.useRef)();f.current=s;var p=Object(au.useCallback)((function(){n.current&&i&&n.current.classList.remove(i)}),[i,n]),v=Object(au.useCallback)((function(e){return c?k.a.resolve(c(e)):Object(co.getFilesFromDragEvent)(e,l||{})}),[c,l]),g=Object(au.useCallback)((function(e){v(e).then((function(e){r(e,f.current)}))}),[r,v,f]),h=Object(au.useCallback)((function(e){e.preventDefault(),n.current&&i&&n.current.classList.add(i)}),[i,n]),b=Object(au.useCallback)((function(e){e.preventDefault(),e.persist(),p(),g(e)}),[p,g]),m=Object(au.useCallback)((function(){p()}),[p]),S=Object(au.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),p()}),[p]);return iu.a.createElement("div",ru()({id:o,className:u,ref:n,onDragOver:h,onDrop:b,onDragLeave:m,onDragEnd:S},d),a)})),so=lo,fo={IMAGE:"image",VIDEO:"video"},po=n("R8cT"),vo=n.n(po),go=Object(ae.b)({rememberPreviousBatches:!1,loadFirstOnly:!1,maxPreviewImageSize:2e7,maxPreviewVideoSize:1e8,fallbackUrl:"",imageMimeTypes:["image/jpeg","image/webp","image/gif","image/png","image/apng","image/bmp","image/x-icon","image/svg+xml"],videoMimeTypes:["video/mp4","video/webm","video/ogg"]}),ho=function(e,t){var n=Object(ae.e)(e)?e(t):e;return"string"==typeof n&&(n={url:n,name:t.name,type:fo.IMAGE}),n},bo=function(e,t,n,r){var u;return t&&~ce()(t).call(t,r.type)&&(!n||r.size<=n)&&(u={url:vo.a.createObjectURL(r),name:r.name,type:e}),u},mo=function(e,t,n){var r,u,o=!1;if(e.file){var a=e.file;(r=function(e,t){var n=bo(fo.IMAGE,t.imageMimeTypes,t.maxPreviewImageSize||0,e);return n||(n=bo(fo.VIDEO,t.videoMimeTypes,t.maxPreviewVideoSize||0,e)),n}(e.file,t))||(r=ho(t.fallbackUrl,a),o=!0)}else r={url:e.url,name:e.url,type:fo.IMAGE};return r&&(u=Object(ae.e)(n)?n(e,r.url,r.type):n),r&&fe()(fe()({},r),{},{id:e.id,isFallback:o,props:u})},So=function(e){var t,n=Object(au.useState)([]),r=$()(n,2),u=r[0],o=r[1],a=(t=e,fe()(fe()({},go),t)),i=Object(au.useCallback)((function(){o([])}),[]);return bu((function(t){var n,r,i,c,l,d=a.loadFirstOnly?de()(n=t.items).call(n,0,1):t.items,s=_t()(r=Me()(d).call(d,(function(t){return mo(t,a,e.previewComponentProps)}))).call(r,Boolean);o(e.rememberPreviousBatches?(i=u,c=s,l=[],V()(c).call(c,(function(e){var t=D()(i).call(i,(function(t){return t.id===e.id}));~t?Ge()(i).call(i,t,1,e):l.push(e)})),_()(i).call(i,l)):s)})),{previews:u,clearPreviews:i}},Eo=function(e){var t=e.PreviewComponent,n=e.previewMethodsRef,r=e.onPreviewsChanged,u=ou()(e,["PreviewComponent","previewMethodsRef","onPreviewsChanged"]),o=So(u),a=o.previews,i=o.clearPreviews,c=Object(au.useCallback)((function(t){var n=t.target,r=ho(e.fallbackUrl,n.src);r&&(n.src=r.url)}),[e.fallbackUrl]);return function(e,t,n,r){Object(au.useImperativeHandle)(n,(function(){return{clear:t}}),[t]),Object(au.useEffect)((function(){r&&r(e)}),[e,r])}(a,i,n,r),Me()(a).call(a,(function(e){var n=e.id,r=e.url,u=e.type,o=e.name,a=e.isFallback,i=e.props;return t?iu.a.createElement(t,ru()({key:n+r,id:n,url:r,type:u,name:o,isFallback:a},i)):function(e,t,n,r){return e===fo.VIDEO?iu.a.createElement("video",ru()({key:t,src:t,controls:!0},n)):iu.a.createElement("img",ru()({key:t,onError:r,src:t},n))}(u,r,i,c)}))},yo=Eo,Oo=Object(au.forwardRef)((function(e,t){var n=Object(au.useRef)(null),r=su(),u=e.className,o=e.id,a=e.placeholder,i=e.uploadRef,c=e.validate,l=e.ignoreKeyPress,d=ou()(e,["className","id","placeholder","uploadRef","validate","ignoreKeyPress"]),s=Object(au.useRef)();s.current=d,Object(au.useImperativeHandle)(t,(function(){return n.current}),[]);var f=Object(au.useCallback)((function(){var e=n.current,t=null==e?void 0:e.value;(c?c(t,e):t)&&r.upload(t,s.current)}),[r,c,s,n]),p=Object(au.useCallback)((function(e){l||"Enter"!==e.key||f()}),[f,l]);return Object(au.useImperativeHandle)(i,(function(){return f}),[f]),iu.a.createElement("input",{type:"text",id:o,ref:n,className:u,onKeyPress:p,placeholder:a})})),Ro=Oo,Io=Oo},VPmE:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return v})),n.d(t,"i",(function(){return _})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return U})),n.d(t,"j",(function(){return B})),n.d(t,"f",(function(){return T})),n.d(t,"d",(function(){return H.a})),n.d(t,"g",(function(){return p}));var r=function(e){return"function"==typeof e},u=n("/FZm"),o=n.n(u),a=n("FLGM"),i=n.n(a),c=n("o+MX"),l=n.n(c),d=function(e,t,n){var r=!0,u=function(e){var t,n=l()(t=[]).call(t,e);return function(e){return i()(e).call(e,(function(e){return i()(n).call(n,(function(t){return e[t]})).join()}))}}(n);if(e&&t&&e.length===t.length){var a=u(e),c=u(t);r=!!o()(a).call(a,(function(e,t){return e!==c[t]}))}return!r},s=n("9yv6"),f=n.n(s),p=function(){return!0},v=function(e){return p()?e:f()(e)},g=n("RXMP"),h=n.n(g),b=n("OWCx"),m=n.n(b),S=n("+oHS"),E=n.n(S),y=n("6UaR"),O=n.n(y),R=n("zKQ6"),I=n.n(R),L=n("nhkr"),C=n.n(L),T=function(e){var t;return!!e&&"object"===C()(e)&&("Object"===(null===(t=I()(e))||void 0===t?void 0:t.constructor.name)||null===I()(e))},A=function(e){return T(e)||O()(e)},D=function(e,t){var n=E()(e);return t.withSymbols?l()(n).call(n,m()(e)):n},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(n){for(var r=arguments.length,u=new Array(r>1?r-1:0),o=1;o<r;o++)u[o-1]=arguments[o];return n&&u.length&&h()(u).call(u,(function(r){var u;r&&h()(u=D(r,e)).call(u,(function(u){var o=r[u];e.predicate&&!e.predicate(u,o)||(void 0!==o||e.undefinedOverwrites)&&(A(o)?(void 0!==n[u]&&T(n[u])||(n[u]=O()(o)?[]:{}),t(n[u],o)):n[u]=o)}))})),n};return t},_=w(),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;return A(e)?t(O()(e)?[]:{},e):e},k=n("ZbhI"),P=n.n(k),N=n("KYsz"),j=n.n(N),B=function(e,t){var n;return e&&j()(n=E()(e)).call(n,(function(n,r){return~P()(t).call(t,r)&&(n[r]=e[r]),n}),{})},H=n("n5N2")},cDcd:function(t,n){t.exports=e},faye:function(e,n){e.exports=t},n5N2:function(e,t,n){"use strict";var r=n("nhkr"),u=n.n(r);t.a=function(){return"object"===("undefined"==typeof window?"undefined":u()(window))&&!!window.document}},ytft:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"isDebugOn",(function(){return l})),n.d(t,"setDebug",(function(){return d})),n.d(t,"debugLog",(function(){return s}));var r,u=n("ZbhI"),o=n.n(u),a=n("10TY"),i=n("n5N2"),c=n("VPmE"),l=function(){var t;"boolean"!=typeof r&&(r=!Object(c.g)()&&e.env.DEBUG||Object(i.a)()&&("location"in window&&!!~o()(t=window.location.search).call(t,"rpldy_debug=true")||!0===window[a.b]));return r},d=function(e){Object(i.a)()&&(window[a.b]=e),r=!!e||null},s=function(){var e;l()&&(e=console).log.apply(e,arguments)}}.call(this,n("8oxB"))}})}));
//# sourceMappingURL=rpldy-all.umd.min.js.map