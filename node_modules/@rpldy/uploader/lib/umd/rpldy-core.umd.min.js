/*!
 * MIT License
 * 
 * Copyright (c) 2020 Yoav Niran
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.rpldy=n():t.rpldy=n()}(window,(function(){return function(t){function n(n){for(var r,i,u=n[0],c=n[1],l=n[2],s=0,f=[];s<u.length;s++)i=u[s],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(d&&d(n);f.length;)f.shift()();return a.push.apply(a,l||[]),e()}function e(){for(var t,n=0;n<a.length;n++){for(var e=a[n],r=!0,u=1;u<e.length;u++){var c=e[u];0!==o[c]&&(r=!1)}r&&(a.splice(n--,1),t=i(i.s=e[0]))}return t}var r={},o={core:0},a=[];function i(n){if(r[n])return r[n].exports;var e=r[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=r,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)i.d(e,r,function(n){return t[n]}.bind(null,r));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="";var u=window.webpackJsonprpldy=window.webpackJsonprpldy||[],c=u.push.bind(u);u.push=n,u=u.slice();for(var l=0;l<u.length;l++)n(u[l]);var d=c;return a.push([0,"polyfills"]),e()}({0:function(t,n,e){e("Xsbf"),e("mHo/"),e("GjXi"),t.exports=e("SXZu")},"10TY":function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"a",(function(){return o})),e.d(n,"c",(function(){return a}));var r="__rupy-logger-debug__",o={ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted"},a={ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"}},GjXi:function(t,n,e){"use strict";e.r(n),e.d(n,"send",(function(){return B})),e.d(n,"getXhrSend",(function(){return F})),e.d(n,"XHR_SENDER_TYPE",(function(){return f})),e.d(n,"MissingUrlError",(function(){return m}));var r=e("o+MX"),o=e.n(r),a=e("ZbhI"),i=e.n(a),u=e("UtpJ"),c=e.n(u),l=e("kT1S"),d=e.n(l),s=e("mHo/"),f="rpldy-sender",p=e("06Pm"),g=e.n(p),v=e("X5/F"),h=e.n(v),E=e("K82H"),b=e.n(E),S=e("P0a4"),m=function(t){h()(e,t);var n=b()(e);function e(t){var r;return g()(this,e),(r=n.call(this,"".concat(t," didn't receive upload URL"))).name="MissingUrlError",r}return e}(e.n(S)()(Error)),T=e("zLi2"),A=e.n(T),O=e("i5y0"),R=e.n(O),_=e("RXMP"),y=e.n(_),I=function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),a=2;a<e;a++)r[a-2]=arguments[a];var i,u;t.set?t.set.apply(t,o()(i=[n]).call(i,r)):(t.delete&&t.delete(n),t.append.apply(t,o()(u=[n]).call(u,r)))},L=function(t,n){var e,r=new FormData;n.params&&y()(e=R()(n.params)).call(e,(function(t){var n=A()(t,2),e=n[0],o=n[1];return I(r,e,o)}));return function(t,n,e){var r=1===n.length;y()(n).call(n,(function(n,a){var i,u=r?e.paramName:Object(s.isFunction)(e.formatGroupParamName)?e.formatGroupParamName(a,e.paramName):o()(i="".concat(e.paramName,"[")).call(i,a,"]");n.file?I(t,u,n.file,n.file.name):n.url&&I(t,u,n.url)}))}(r,t,n),r},w=[200,201,202,203,204],C=function(t,n,e,r,o){var a,i=(null==o?void 0:o.getRequestData)?o.getRequestData(t,e):function(t,n){var e;if(n.sendWithFormData)s.logger.debugLog("uploady.sender: sending ".concat(t.length," item(s) as form data")),e=L(t,n);else{if(t.length>1)throw new Error("XHR Sender - Request without form data can only contain 1 item. received ".concat(t.length));var r=t[0];s.logger.debugLog("uploady.sender: sending item ".concat(r.id," as request body")),e=r.file||r.url}return e}(t,e),u=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,l=arguments.length>2?arguments[2]:void 0;l=Object(s.merge)(d()(d()({},Object(s.pick)(e,["method","headers","withCredentials"])),{},{preSend:function(n){n.upload.onprogress=function(n){n.lengthComputable&&r&&r(n,c()(t).call(t))}}}),l);var f=Object(s.request)(o,u,l);return a=f.xhr,f},l=(null==o?void 0:o.preRequestHandler)?o.preRequestHandler(u,t,n,e,r,o):u();return{url:n,count:t.length,pXhr:l,getXhr:function(){return a},aborted:!1}},D=function(t,n,e){var r=t,o=n&&n["content-type"];if(e.forceJsonResponse||o&&~i()(o).call(o,"json"))try{r=JSON.parse(t)}catch(t){}return r},P=function(t,n){return t.pXhr.then((function(t){var e,r;s.logger.debugLog("uploady.sender: received upload response ",t),e=~i()(w).call(w,t.status)?s.FILE_STATES.FINISHED:s.FILE_STATES.ERROR,r=t.status;var o=Object(s.parseResponseHeaders)(t);return{status:r,state:e,response:{data:D(t.response,o,n),headers:o}}})).catch((function(n){var e,r;return t.aborted?(e=s.FILE_STATES.ABORTED,r="aborted"):(s.logger.debugLog("uploady.sender: upload failed: ",n),e=s.FILE_STATES.ERROR,r=n),{error:!0,state:e,response:r,status:0}}))},F=function(t){return function(n,e,r,a){if(!e)throw new m(f);s.logger.debugLog("uploady.sender: sending file: ",{items:n,url:e,options:r});var i=C(n,e,r,a,t);return{request:P(i,r),abort:function(){return function(t){var n,e=!1,r=t.aborted,a=(0,t.getXhr)();!r&&a&&a.readyState&&4!==a.readyState&&(s.logger.debugLog(o()(n="uploady.sender: cancelling request with ".concat(t.count," items to: ")).call(n,t.url)),a.abort(),t.aborted=!0,e=!0);return e}(i)},senderType:f}}},B=F();n.default=B},SXZu:function(t,n,e){"use strict";e.r(n),e.d(n,"UPLOADER_EVENTS",(function(){return k})),e.d(n,"DEFAULT_OPTIONS",(function(){return Pt})),e.d(n,"composeEnhancers",(function(){return qt})),e.d(n,"createUploader",(function(){return Xt})),e.d(n,"send",(function(){return Ct.send})),e.d(n,"getXhrSend",(function(){return Ct.getXhrSend})),e.d(n,"XHR_SENDER_TYPE",(function(){return Ct.XHR_SENDER_TYPE})),e.d(n,"MissingUrlError",(function(){return Ct.MissingUrlError}));var r,o=e("FLGM"),a=e.n(o),i=e("RXMP"),u=e.n(i),c=e("M5Mt"),l=e.n(c),d=e("UtpJ"),s=e.n(d),f=e("OBge"),p=e.n(f),g=e("o+MX"),v=e.n(g),h=e("STz3"),E=e.n(h),b=e("Xsbf"),S=e("mHo/"),m=e("KYsz"),T=e.n(m),A=e("zLi2"),O=e.n(A),R=e("LYCE"),_=e.n(R),y=e("+oHS"),I=e.n(y),L=e("CtDf"),w=e.n(L),C=w()("__rpldy-sstt-proxy__"),D=w()("__rpldy-sstt-state__"),P=e("6UaR"),F=e.n(P),B=e("OWCx"),j=e.n(B),N=e("ZbhI"),H=e.n(N),M=function(t){var n;return!Object(S.isProduction)()&&!!t&&!!~H()(n=j()(t)).call(n,C)},U=function(t){return F()(t)||Object(S.isPlainObject)(t)&&!function(t){return Object(S.hasWindow)()&&t instanceof File||t.name&&t.size&&t.uri}(t)},G=Object(S.getMerge)({withSymbols:!0,predicate:function(t){return t!==C&&t!==D}}),x=function(t){return!!Object(S.isProduction)()||t[D].isUpdateable},X=function(t,n){Object(S.isProduction)()||(t[D].isUpdateable=n)},q=function(t,n){var e,r;U(t)&&(M(t)||(t[C]=!0,e=new Proxy(t,n)),u()(r=I()(t)).call(r,(function(e){t[e]=q(t[e],n)})));return e||t},z=function(t){return M(t)?Object(S.clone)(t,G):t},k=Object(S.devFreeze)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND",ALL_ABORT:"ALL_ABORT"}),Q=Object(S.devFreeze)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),Z=e("cdeZ"),Y=e.n(Z),J=e("5PDf"),W=e.n(J),K=e("04Ix"),V=e.n(K),$=e("TEMH"),tt=e.n($),nt=e("mnMc"),et=e.n(nt),rt=e("kT1S"),ot=e.n(rt),at=[S.BATCH_STATES.ADDED,S.BATCH_STATES.PROCESSING,S.BATCH_STATES.UPLOADING],it=function(t,n){return t.batches[n].batch},ut=function(t,n,e){return t.getState().items[n].batchId===e},ct=function(t,n){var e=t.getState(),r=e.items[n];return e.batches[r.batchId]},lt=function(t,n){return ct(t,n).batch},dt=function(t,n){var e=function(t,n){return it(t.getState(),n)}(t,n);t.updateState((function(t){var n;u()(n=e.items).call(n,(function(n){var e,r=n.id;delete t.items[r];var o,a=H()(e=t.itemQueue).call(e,r);~a&&l()(o=t.itemQueue).call(o,a,1)}))}))},st=function(t,n){t.updateState((function(t){delete t.batches[n]}))},ft=function(t,n){var e=lt(t,n);return t.getState().currentBatch!==e.id},pt=function(t){var n=t.getState(),e=n.currentBatch;e&&n.batches[e]&&function(t){var n=t.getState().itemQueue;return 0===n.length||ft(t,n[0])}(t)&&(gt(t,e,k.BATCH_FINISH),dt(t,e),st(t,e))},gt=function(t,n,e){var r,o=t.getState(),i=it(o,n),u=o.items,c=ot()(ot()({},z(i)),{},{items:a()(r=i.items).call(r,(function(t){var n=t.id;return z(u[n])}))});t.trigger(e,c)},vt=function(t,n){var e=lt(t,n);return et()(at).call(at,e.state)},ht=(r={},V()(r,S.FILE_STATES.ADDED,k.ITEM_START),V()(r,S.FILE_STATES.FINISHED,k.ITEM_FINISH),V()(r,S.FILE_STATES.ERROR,k.ITEM_ERROR),V()(r,S.FILE_STATES.CANCELLED,k.ITEM_CANCEL),V()(r,S.FILE_STATES.ABORTED,k.ITEM_ABORT),V()(r,S.FILE_STATES.UPLOADING,k.ITEM_PROGRESS),r),Et=[S.FILE_STATES.FINISHED,S.FILE_STATES.ERROR,S.FILE_STATES.CANCELLED,S.FILE_STATES.ABORTED],bt=function(t){return!!~H()(Et).call(Et,t.state)},St=function(t,n,e){return u()(n).call(n,(function(n){var e,r=t.getState(),o=n.id,a=n.info;if(S.logger.debugLog("uploader.processor.queue: request finished for item - ",{id:o,info:a}),r.items[o]){t.updateState((function(t){var n=t.items[o];n.state=a.state,n.uploadResponse=a.response,bt(n)&&delete t.aborts[o]}));var i=t.getState().items[o];a.state===S.FILE_STATES.FINISHED&&i.completed<100&&t.handleItemProgress(i,100,i.file?i.file.size:0),t.trigger(ht[i.state],i),bt(i)&&t.trigger(k.ITEM_FINALIZE,i)}var u=H()(e=r.itemQueue).call(e,o);~u&&t.updateState((function(t){var n,e;l()(n=t.itemQueue).call(n,u,1);var r,a=H()(e=t.activeIds).call(e,o);~a&&l()(r=t.activeIds).call(r,a,1)}))})),pt(t),e(t)},mt=Object(S.getMerge)({undefinedOverwrites:!0}),Tt=function(t,n){var e=a()(n).call(n,(function(t){return t.id}));return t.updateState((function(t){var n;t.activeIds=v()(n=t.activeIds).call(n,e)})),function(t,n,e){return Object(S.triggerUpdater)(t.trigger,k.REQUEST_PRE_SEND,{items:n,options:e}).then((function(t){if(t){if(S.logger.debugLog("uploader.queue: REQUEST_PRE_SEND event returned updated items/options",t),t.items){if(t.items.length!==n.length||!Object(S.isSamePropInArrays)(t.items,n,["id","batchId","recycled"]))throw new Error("REQUEST_PRE_SEND event handlers must return same items with same ids");n=t.items}t.options&&(e=mt({},e,t.options))}return{items:n,options:e,cancelled:!1===t}}))}(t,n,t.getState().batches[n[0].batchId].batchOptions).then((function(e){if(!e.cancelled){var r;t.updateState((function(t){var r;u()(r=e.items).call(r,(function(n){t.items[n.id]=n})),t.batches[n[0].batchId].batchOptions=e.options}));var o=t.getState();e.items=a()(r=e.items).call(r,(function(t){return o.items[t.id]})),e.options=o.batches[n[0].batchId].batchOptions}return e}))},At=function(t,n,e){var r,o=n.items,i=n.options,c=t.getState().batches[o[0].batchId].batch;try{r=t.sender.send(o,c,i)}catch(t){S.logger.debugLog("uploader.queue: sender failed with unexpected error",t),r={request:p.a.resolve({status:0,state:S.FILE_STATES.ERROR,response:t.message}),abort:function(){return!1},senderType:"exception-handler"}}return function(t,n,e){t.updateState((function(t){u()(n).call(n,(function(n){t.items[n.id].state=S.FILE_STATES.UPLOADING,t.aborts[n.id]=e.abort}))}))}(t,o,r),r.request.then((function(n){var r=a()(o).call(o,(function(t){return{id:t.id,info:n}}));St(t,r,e)}))},Ot=function(t,n,e){var r=t.getState(),o=E()(r.items);return o=W()(o).call(o,(function(t){return!!~H()(n).call(n,t.id)})),p.a.all(a()(o).call(o,(function(n){return t.runCancellable(k.ITEM_START,n)}))).then((function(n){var e;return{allowedItems:W()(e=a()(n).call(n,(function(n,e){return n?null:function(t,n){return n.getState().items[t]}(o[e].id,t)}))).call(e,Boolean),cancelledResults:n}})).then((function(r){var i=r.allowedItems,u=r.cancelledResults;return(i.length?Tt(t,i).then():p.a.resolve()).then((function(r){var i;return r&&(r.cancelled?u=a()(n).call(n,(function(){return!0})):At(t,r,e)),function(t,n,e,r){var o,i=W()(o=a()(e).call(e,(function(t,e){return t?n[e].id:null}))).call(o,Boolean);if(i.length){var u=a()(i).call(i,(function(t){return{id:t,info:{status:0,state:S.FILE_STATES.CANCELLED,response:"cancel"}}}));St(t,u,r)}return!!i.length}(t,o,u,e)||(i=e(t)),i}))}))},Rt=function(t,n){var e,r;return!!~H()(e=Y()(r=t.getState().activeIds).call(r)).call(e,n)},_t=function(t){var n,e=t.getState().itemQueue,r=function(t){for(var n=t.getState(),e=n.itemQueue,r=n.items,o=0,a=e[o];a&&(Rt(t,a)||!vt(t,a)||r[a].state!==S.FILE_STATES.ADDED);)a=e[o+=1];return a?o:-1}(t),o=e[r];if(o){var a=ct(t,o),i=a.batch.id,u=a.batchOptions.maxGroupSize||0;if(a.batchOptions.grouped&&u>1){n=[];for(var c=!0;n.length<u&&c;)n.push(o),c=(o=e[r+n.length])&&ut(t,o,i)}else n=[o]}return n},yt=function(t){var n=_t(t),e=p.a.resolve();if(n){var r=t.getCurrentActiveCount(),o=t.getOptions(),a=o.concurrent,i=void 0===a?0:a,u=o.maxConcurrent;if(!r||i&&r<(void 0===u?0:u)){S.logger.debugLog("uploader.processor: Processing next upload - ",{ids:n,state:t.getState(),currentCount:r});var c=!1,l=p.a.resolve(!1);ft(t,n[0])&&(l=function(t,n){var e=lt(t,n);return t.runCancellable(k.BATCH_START,e).then((function(n){return n||t.updateState((function(t){t.currentBatch=e.id})),!n}))}(t,n[0]).then((function(e){return(c=!e)&&(!function(t,n){var e=lt(t,n),r=e.id;S.logger.debugLog("uploady.uploader.processor: cancelling batch: ",{batch:e}),t.updateState((function(t){it(t,r).state=S.BATCH_STATES.CANCELLED})),gt(t,r,k.BATCH_CANCEL),dt(t,r),st(t,r)}(t,n[0]),yt(t)),c}))),e=l.then((function(e){e||Ot(t,n,yt)}))}}return e},It=yt,Lt=function(t,n,e){var r=!1,o=t.getState(),a=o.items[n];return a&&function(t){return t===S.FILE_STATES.ADDED||t===S.FILE_STATES.UPLOADING}(a.state)&&(S.logger.debugLog("uploader.queue: aborting item in progress - ",a),a.state===S.FILE_STATES.UPLOADING?(t.updateState((function(t){t.items[n].state=S.FILE_STATES.ABORTED})),r=o.aborts[n]()):(St(t,[{id:n,info:{status:0,state:S.FILE_STATES.ABORTED,response:"aborted"}}],e),r=!0)),r},wt=function(t,n,e,r,o){var a=function(t){var n={set:function(t,r,o){return x(e)&&(t[r]=q(o,n)),!0},get:function(t,n){return n===C?z(t):t[n]},defineProperty:function(){throw new Error("Simple State doesnt support defining property")},setPrototypeOf:function(){throw new Error("Simple State doesnt support setting prototype")},deleteProperty:function(t,n){return x(e)&&delete t[n],!0}};Object(S.isProduction)()||M(t)||_()(t,D,{value:{isUpdateable:!1},configurable:!0});var e=Object(S.isProduction)()?t:q(t,n);return{state:e,update:function(t){if(!Object(S.isProduction)()&&x(e))throw new Error("Can't call update on State already being updated!");try{X(e,!0),t(e)}finally{X(e,!1)}return e},unwrap:function(t){return t?z(t):M(e)?z(e):e}}}({itemQueue:[],currentBatch:null,batches:{},items:{},activeIds:[],aborts:{}}),i=a.state,c=a.update,d=function(){return i},s=function(t){c(t)},f=function(t){if(i.items[t.id]&&!t.recycled)throw new Error("Uploader queue conflict - item ".concat(t.id," already exists"));t.recycled&&function(t,n){var e=n.previousBatch;if(n.recycled&&e&&t.getState().batches[e]){var r=lt(t,n.id).id;r===e&&t.updateState((function(t){var e,o,a=it(t,r),i=tt()(e=a.items).call(e,(function(t){return t.id===n.id}));~i&&l()(o=a.items).call(o,i,1)}))}}(g,t),s((function(n){n.items[t.id]=t,n.itemQueue.push(t.id)}))},p=function(t,e,r){i.items[t.id]&&(s((function(n){var o=n.items[t.id];o.loaded=r,o.completed=e})),n(k.ITEM_PROGRESS,d().items[t.id]))};r.on(Q.ITEM_PROGRESS,p),r.on(Q.BATCH_PROGRESS,(function(t){var e,r=null===(e=i.batches[t.id])||void 0===e?void 0:e.batch.items;if(r){var o=T()(r).call(r,(function(t,n){return t[0]+=n.completed,t[1]+=n.loaded,t}),[0,0]),a=O()(o,2),u=a[0],c=a[1];s((function(n){var e=n.batches[t.id].batch;e.completed=u/r.length,e.loaded=c})),n(k.BATCH_PROGRESS,i.batches[t.id].batch)}}));var g={getOptions:function(){return t},getCurrentActiveCount:function(){return i.activeIds.length},getState:d,updateState:s,trigger:n,runCancellable:function(t){var n;if(!Object(S.isFunction)(e))throw new Error("cancellable is of wrong type");for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return e.apply(void 0,v()(n=[t]).call(n,o))},sender:r,handleItemProgress:p};return Object(S.hasWindow)()&&S.logger.isDebugOn()&&(window["__rpldy_".concat(o,"_queue_state")]=g),{updateState:s,getState:g.getState,runCancellable:g.runCancellable,uploadBatch:function(t,n){var e;n&&s((function(e){e.batches[t.id].batchOptions=n})),u()(e=t.items).call(e,f),It(g)},addBatch:function(t,n){return s((function(e){e.batches[t.id]={batch:t,batchOptions:n}})),it(i,t.id)},abortItem:function(t){return function(t,n,e){return Lt(t,n,e)}(g,t,It)},abortBatch:function(t){!function(t,n,e){var r,o=t.getState().batches[n],a=null==o?void 0:o.batch;a&&a.state!==S.BATCH_STATES.CANCELLED&&a.state!==S.BATCH_STATES.FINISHED&&(u()(r=a.items).call(r,(function(n){return Lt(t,n.id,e)})),t.updateState((function(t){it(t,n).state=S.BATCH_STATES.ABORTED})),gt(t,n,k.BATCH_ABORT))}(g,t,It)},abortAll:function(){var t,n,e,r;n=It,r=(t=g).getState().items,u()(e=I()(r)).call(e,(function(e){return Lt(t,e,n)})),t.trigger(k.ALL_ABORT)}}},Ct=e("GjXi"),Dt=function(){return!0},Pt=Object(S.devFreeze)({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:Dt,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0}),Ft=function(t,n,e,r){!function(t,n,e,r){u()(t).call(t,(function(t){var o,a;S.logger.debugLog(v()(o=v()(a="uploady.uploader.processor: file: ".concat(t.id," progress event: loaded(")).call(a,e,") - completed(")).call(o,n,")")),r(Q.ITEM_PROGRESS,t,n,e)}))}(t,Math.min(e.loaded/e.total*100,100)/t.length,e.loaded/t.length,r),r(Q.BATCH_PROGRESS,n)},Bt=function(){var t=Object(b.default)({send:function(t,e,r){var o=r.destination,a=null==o?void 0:o.url,i=Object(S.throttle)((function(r){return Ft(t,e,r,n)}),50,!0);return(Object(S.isFunction)(r.send)?r.send:Ct.default)(t,a,{method:(null==o?void 0:o.method)||r.method||Pt.method,paramName:(null==o?void 0:o.filesParamName)||r.inputFieldName||"file",params:ot()(ot()({},r.params),null==o?void 0:o.params),forceJsonResponse:r.forceJsonResponse,withCredentials:r.withCredentials,formatGroupParamName:r.formatGroupParamName,headers:null==o?void 0:o.headers,sendWithFormData:r.sendWithFormData},i)}},E()(Q)),n=t.trigger;return t.target},jt=Object(S.hasWindow)()&&"FileList"in window,Nt=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=t;if(!Object(S.isProduction)())if(n<3&&M(t))e=z(t);else if(n<3&&U(t)){var r,o;e=F()(t)?a()(r=I()(t)).call(r,(function(n){return Nt(t[n])})):T()(o=I()(t)).call(o,(function(e,r){return e[r]=Nt(t[r],n+1),e}),{})}return e},Ht=0,Mt=function(t,n,e){var r;return a()(r=W()(Array.prototype).call(n,e||Dt)).call(r,(function(n){return Object(S.createBatchItem)(n,t)}))},Ut=function(t,n,e){var r="batch-".concat(Ht+=1),o=function(t){return jt&&t instanceof FileList||"[object FileList]"===t.toString()}(t);return t=F()(t)||o?t:[t],{id:r,uploaderId:n,items:Mt(r,t,e.fileFilter),state:S.BATCH_STATES.ADDED,completed:0,loaded:0}},Gt=E()(k),xt=0,Xt=function(t){var n="uploader-".concat(xt+=1),e=!1,r=[],o={};S.logger.debugLog("uploady.uploader: creating new instance (".concat(n,")"),{options:t,counter:xt});var i=function(t){return ot()(ot()(ot()({},Pt),t),{},{destination:t&&t.destination?(n=t.destination,ot()({filesParamName:"file",params:{}},n)):null});var n}(t),c=function(){l()(r).call(r,0)},d=Object(b.default)({id:n,update:function(t){return i=Object(S.merge)({},i,t),g},add:function(t,n){var e,o=Object(S.merge)({},i,n),a=T.addNewBatch(t,g.id,o);return a.items.length?e=T.runCancellable(k.BATCH_ADD,a,o).then((function(t){var n;t?(a.state=S.BATCH_STATES.CANCELLED,h(k.BATCH_CANCEL,a)):(S.logger.debugLog(v()(n="uploady.uploader [".concat(g.id,"]: new items added - auto upload =\n                        ")).call(n,String(o.autoUpload)),a.items),o.autoUpload?T.process(a):(o.clearPendingOnAdd&&c(),r.push({batch:a,uploadOptions:o})))})):S.logger.debugLog("uploady.uploader: no items to add. batch ".concat(a.id," is empty. check fileFilter if this isn't intended")),e||p.a.resolve()},upload:function(t){var n;u()(n=l()(r).call(r,0)).call(n,(function(n){var e=n.batch,r=n.uploadOptions;return T.process(e,Object(S.merge)({},r,t))}))},abort:function(t){T.abort(t)},abortBatch:function(t){T.abortBatch(t)},getOptions:function(){return Object(S.clone)(i)},getPending:function(){return s()(r).call(r)},clearPending:c,registerExtension:function(t,n){Object(S.invariant)(e,"Uploady - uploader extensions can only be registered by enhancers"),Object(S.invariant)(!o[t],"Uploady - uploader extension by this name [%s] already exists",t),S.logger.debugLog("uploady.uploader: registering extension: ".concat(t.toString()),n),o[t]=n},getExtension:function(t){return o[t]}},Gt,{canAddEvents:!1,canRemoveEvents:!1}),f=d.trigger,g=d.target,h=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var o=Object(b.createLifePack)((function(){return a()(e).call(e,Nt)}));return f(t,o)},E=Object(S.triggerCancellable)(h);if(i.enhancer){e=!0;var m=i.enhancer(g,h);e=!1,g=m||g}var T=function(t,n,e,r){var o=Bt(),a=wt(e,t,n,o,r);return{process:function(t,n){a.uploadBatch(t,n)},abortBatch:function(t){a.abortBatch(t)},abort:function(t){t?a.abortItem(t):a.abortAll()},addNewBatch:function(t,n,e){var r=Ut(t,n,e);return a.addBatch(r,e)},runCancellable:a.runCancellable}}(h,E,i,g.id);return Object(S.devFreeze)(g)},qt=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return T()(n).call(n,(function(t,n){var e;return n.apply(void 0,v()(e=[t]).call(e,r))||t}),t)}};n.default=Xt},VPmE:function(t,n,e){"use strict";e.d(n,"e",(function(){return r})),e.d(n,"h",(function(){return d})),e.d(n,"b",(function(){return g})),e.d(n,"i",(function(){return D})),e.d(n,"c",(function(){return C})),e.d(n,"a",(function(){return P})),e.d(n,"j",(function(){return H})),e.d(n,"f",(function(){return I})),e.d(n,"d",(function(){return M.a})),e.d(n,"g",(function(){return p}));var r=function(t){return"function"==typeof t},o=e("/FZm"),a=e.n(o),i=e("FLGM"),u=e.n(i),c=e("o+MX"),l=e.n(c),d=function(t,n,e){var r=!0,o=function(t){var n,e=l()(n=[]).call(n,t);return function(t){return u()(t).call(t,(function(t){return u()(e).call(e,(function(n){return t[n]})).join()}))}}(e);if(t&&n&&t.length===n.length){var i=o(t),c=o(n);r=!!a()(i).call(i,(function(t,n){return t!==c[n]}))}return!r},s=e("9yv6"),f=e.n(s),p=function(){return!0},g=function(t){return p()?t:f()(t)},v=e("RXMP"),h=e.n(v),E=e("OWCx"),b=e.n(E),S=e("+oHS"),m=e.n(S),T=e("6UaR"),A=e.n(T),O=e("zKQ6"),R=e.n(O),_=e("nhkr"),y=e.n(_),I=function(t){var n;return!!t&&"object"===y()(t)&&("Object"===(null===(n=R()(t))||void 0===n?void 0:n.constructor.name)||null===R()(t))},L=function(t){return I(t)||A()(t)},w=function(t,n){var e=m()(t);return n.withSymbols?l()(e).call(e,b()(t)):e},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return e&&o.length&&h()(o).call(o,(function(r){var o;r&&h()(o=w(r,t)).call(o,(function(o){var a=r[o];t.predicate&&!t.predicate(o,a)||(void 0!==a||t.undefinedOverwrites)&&(L(a)?(void 0!==e[o]&&I(e[o])||(e[o]=A()(a)?[]:{}),n(e[o],a)):e[o]=a)}))})),e};return n},D=C(),P=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;return L(t)?n(A()(t)?[]:{},t):t},F=e("ZbhI"),B=e.n(F),j=e("KYsz"),N=e.n(j),H=function(t,n){var e;return t&&N()(e=m()(t)).call(e,(function(e,r){return~B()(n).call(n,r)&&(e[r]=t[r]),e}),{})},M=e("n5N2")},Xsbf:function(t,n,e){"use strict";e.r(n),e.d(n,"default",(function(){return dt})),e.d(n,"addLife",(function(){return dt})),e.d(n,"isLE",(function(){return $})),e.d(n,"createLifePack",(function(){return vt}));var r=e("04Ix"),o=e.n(r),a=e("RSWj"),i=e.n(a),u=e("HnXd"),c=e.n(u),l=e("M5Mt"),d=e.n(l),s=e("OBge"),f=e.n(s),p=e("Vi3r"),g=e.n(p),v=e("FLGM"),h=e.n(v),E=e("5PDf"),b=e.n(E),S=e("kT1S"),m=e.n(S),T=e("eLKs"),A=e.n(T),O=e("+oHS"),R=e.n(O),_=e("zLi2"),y=e.n(_),I=e("i5y0"),L=e.n(I),w=e("KYsz"),C=e.n(w),D=e("STz3"),P=e.n(D),F=e("cdeZ"),B=e.n(F),j=e("UtpJ"),N=e.n(j),H=e("/FZm"),M=e.n(H),U=e("ZbhI"),G=e.n(U),x=e("JlUD"),X=e.n(x),q=e("mHo/"),z=Object(q.devFreeze)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),k=function(t,n){if(!Object(q.isFunction)(t))throw new Error("'".concat(n,"' is not a valid function"))},Q=function(t){return void 0===t},Z=e("CtDf"),Y=e.n(Z),J=Y()("__le__"),W=Y()("__le__pack__"),K=function(t){return t?t[J]:null},V=function(t){var n=K(t);if(!n)throw new Error("Didnt find LE internal object. Something very bad happened!");return n},$=function(t){return!!K(t)},tt=function(t,n,e){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];k(e,"cb");var a=V(t);if(!a.options.allowRegisterNonExistent&&!~G()(r=a.events).call(r,n))throw new Error("Cannot register for event ".concat(n.toString()," that wasn't already defined (allowRegisterNonExistent = false)"));var i=a.registry[n]||[];return M()(i).call(i,(function(t){return t.cb===e}))||(i.push({name:n,cb:e,once:o}),a.registry[n]=i),function(){return ct.call(t,n,e)}},nt=function(t,n){var e,r,o=V(t).registry;return n?o[n]?N()(e=o[n]).call(e):[]:B()(r=P()(o)).call(r)},et={on:function(t,n){return tt(this,t,n)},once:function(t,n){return tt(this,t,n,!0)},off:ct,getEvents:function(){var t;return N()(t=V(this).events).call(t)}},rt=function(){var t;return C()(t=L()(et)).call(t,(function(t,n){var e=y()(n,2),r=e[0],o=e[1];return t[r]={value:o},t}),{})},ot={trigger:function(t){for(var n=this,e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var a,i=nt(this,t);if(i.length){var u,c,l,d;1===r.length&&!0===(null===(u=r[0])||void 0===u?void 0:u[W])&&(d=r[0].resolve()),a=h()(c=b()(l=h()(i).call(i,(function(e){return e.once&&ut(n,t,e.cb),d?e.cb.apply(e,g()(d)):r.length?1===r.length?e.cb(r[0]):2===r.length?e.cb(r[0],r[1]):3===r.length?e.cb(r[0],r[1],r[2]):e.cb.apply(e,r):e.cb()}))).call(l,(function(t){return!Q(t)}))).call(c,(function(t){return X()(t)?t:f.a.resolve(t)}))}return a&&(a.length?a:void 0)},addEvent:function(t){var n=V(this);if(!n.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");var e;if(~G()(e=n.events).call(e,t))throw new Error("Event '".concat(t,"' already defined"));n.events.push(t)},removeEvent:function(t){var n=V(this);if(!n.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");var e,r,o=G()(e=n.events).call(e,t);d()(r=n.events).call(r,o,1)},hasEvent:function(t){var n,e=V(this);return!!~G()(n=e.events).call(n,t)},hasEventRegistrations:function(t){return!!nt(this,t).length},assign:function(t){var n=V(this);return lt(t,n.options,n.events,n.registry,n.stats),at(t)}},at=function(t){var n;return C()(n=R()(ot)).call(n,(function(n,e){var r;return n[e]=A()(r=ot[e]).call(r,t),n}),m()({target:t},ot))},it=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=V(t).registry;!r[n]||!e&&r[n].length||delete r[n]},ut=function(t,n,e){var r,o=V(t).registry;o[n]&&(e?(o[n]=b()(r=o[n]).call(r,(function(t){return t.cb!==e})),it(t,n)):it(t,n,!0))};function ct(t,n){ut(this,t,n)}var lt=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};c()(t,m()(o()({},J,{value:i()({registry:r,events:e,options:n,stats:a})}),rt()))},dt=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return t=t||{},e=m()(m()({},z),e),$(t)||lt(t,e,n),at(t)},st=e("LYCE"),ft=e.n(st),pt=e("o+MX"),gt=e.n(pt),vt=function(t){var n={resolve:function(){var n;return gt()(n=[]).call(n,t())}};return ft()(n,W,{value:!0,configurable:!1}),n}},"mHo/":function(t,n,e){"use strict";e.r(n),e.d(n,"BATCH_STATES",(function(){return u.a})),e.d(n,"FILE_STATES",(function(){return u.c})),e.d(n,"invariant",(function(){return o.a})),e.d(n,"throttle",(function(){return i.a})),e.d(n,"logger",(function(){return c})),e.d(n,"triggerCancellable",(function(){return v})),e.d(n,"triggerUpdater",(function(){return E})),e.d(n,"createBatchItem",(function(){return _})),e.d(n,"request",(function(){return U})),e.d(n,"parseResponseHeaders",(function(){return M})),e.d(n,"isFunction",(function(){return G.e})),e.d(n,"isPlainObject",(function(){return G.f})),e.d(n,"isSamePropInArrays",(function(){return G.h})),e.d(n,"devFreeze",(function(){return G.b})),e.d(n,"merge",(function(){return G.i})),e.d(n,"getMerge",(function(){return G.c})),e.d(n,"clone",(function(){return G.a})),e.d(n,"pick",(function(){return G.j})),e.d(n,"hasWindow",(function(){return G.d})),e.d(n,"isProduction",(function(){return G.g}));var r=e("kvau"),o=e.n(r),a=e("uDTZ"),i=e.n(a),u=e("10TY"),c=e("ytft"),l=e("TEMH"),d=e.n(l),s=e("o+MX"),f=e.n(s),p=e("OBge"),g=e.n(p),v=function(t,n){for(var e,r=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return new g.a((function(e,o){var a,i=t.apply(void 0,f()(a=[n]).call(a,r));i&&i.length?g.a.all(i).catch(o).then((function(t){return t&&e(!!~d()(t).call(t,(function(t){return!1===t})))})):e(!1)}))},o=arguments.length,a=new Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];return n?r.apply(void 0,f()(e=[n]).call(e,a)):r},h=function(t){return null==t},E=function(t,n){for(var e,r=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return new g.a((function(e,o){var a,i=t.apply(void 0,f()(a=[n]).call(a,r));i&&i.length?g.a.all(i).catch(o).then((function(t){var n;if(t)for(;h(n)&&t.length;)n=t.pop();e(h(n)?void 0:n)})):e()}))},o=arguments.length,a=new Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];return n?r.apply(void 0,f()(e=[n]).call(e,a)):r},b=e("LYCE"),S=e.n(b),m=e("nhkr"),T=e.n(m),A=e("CtDf"),O=e.n(A)()("__rpldy-bi__"),R=0,_=function(t,n){var e;R+=1;var r={id:t.id&&t.batchId?t.id:f()(e="".concat(n,".item-")).call(e,R),batchId:n,state:u.c.ADDED,completed:0,loaded:0,aborted:!1,recycled:!1,previousBatch:null};if(S()(r,O,{value:!0,writable:!0}),"object"===T()(t)&&!0===t[O]&&(r.recycled=!0,r.previousBatch=t.batchId,t=t.file||t.url),"string"==typeof t)r=function(t,n){return t.url=n,t}(r,t);else{if(!function(t){return t&&(t instanceof Blob||t instanceof File||"object"===T()(t)&&t.name&&t.type)}(t))throw new Error("Unknown type of file added: ".concat(T()(t)));r=function(t,n){return t.file=n,t}(r,t)}return r},y=e("+oHS"),I=e.n(y),L=e("RXMP"),w=e.n(L),C=function(t,n){var e;n&&w()(e=I()(n)).call(e,(function(e){void 0!==n[e]&&t.setRequestHeader(e,n[e])}))},D=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest,o=new g.a((function(o,a){r.onerror=function(){return a(r)},r.ontimeout=function(){return a(r)},r.onabort=function(){return a(r)},r.onload=function(){return o(r)},r.open(e.method||"GET",t),C(r,e.headers),r.withCredentials=!!e.withCredentials,e.preSend&&e.preSend(r),r.send(n)}));return o.xhr=r,o},P=e("zLi2"),F=e.n(P),B=e("RKTd"),j=e.n(B),N=e("KYsz"),H=e.n(N),M=function(t){var n;try{var e,r;n=H()(e=j()(r=t.getAllResponseHeaders()).call(r).split(/[\r\n]+/)).call(e,(function(t,n){var e=n.split(": "),r=F()(e,2),o=r[0],a=r[1];return t[o]=a,t}),{})}catch(n){Object(c.debugLog)("uploady.request: failed to read response headers",t)}return n},U=D,G=e("VPmE")},n5N2:function(t,n,e){"use strict";var r=e("nhkr"),o=e.n(r);n.a=function(){return"object"===("undefined"==typeof window?"undefined":o()(window))&&!!window.document}},ytft:function(t,n,e){"use strict";e.r(n),function(t){e.d(n,"isDebugOn",(function(){return l})),e.d(n,"setDebug",(function(){return d})),e.d(n,"debugLog",(function(){return s}));var r,o=e("ZbhI"),a=e.n(o),i=e("10TY"),u=e("n5N2"),c=e("VPmE"),l=function(){var n;"boolean"!=typeof r&&(r=!Object(c.g)()&&t.env.DEBUG||Object(u.a)()&&("location"in window&&!!~a()(n=window.location.search).call(n,"rpldy_debug=true")||!0===window[i.b]));return r},d=function(t){Object(u.a)()&&(window[i.b]=t),r=!!t||null},s=function(){var t;l()&&(t=console).log.apply(t,arguments)}}.call(this,e("8oxB"))}})}));
//# sourceMappingURL=rpldy-core.umd.min.js.map